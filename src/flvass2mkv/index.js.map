{"version":3,"file":"index.js","sources":["util/shim.js","demuxer/flvdemuxer.js","demuxer/ass.js","node_modules/lodash-es/_freeGlobal.js","node_modules/lodash-es/_root.js","node_modules/lodash-es/_Symbol.js","node_modules/lodash-es/_getRawTag.js","node_modules/lodash-es/_objectToString.js","node_modules/lodash-es/_baseGetTag.js","node_modules/lodash-es/isObject.js","node_modules/lodash-es/isFunction.js","node_modules/lodash-es/_coreJsData.js","node_modules/lodash-es/_isMasked.js","node_modules/lodash-es/_toSource.js","node_modules/lodash-es/_baseIsNative.js","node_modules/lodash-es/_getValue.js","node_modules/lodash-es/_getNative.js","node_modules/lodash-es/_nativeCreate.js","node_modules/lodash-es/_hashClear.js","node_modules/lodash-es/_hashDelete.js","node_modules/lodash-es/_hashGet.js","node_modules/lodash-es/_hashHas.js","node_modules/lodash-es/_hashSet.js","node_modules/lodash-es/_Hash.js","node_modules/lodash-es/_listCacheClear.js","node_modules/lodash-es/eq.js","node_modules/lodash-es/_assocIndexOf.js","node_modules/lodash-es/_listCacheDelete.js","node_modules/lodash-es/_listCacheGet.js","node_modules/lodash-es/_listCacheHas.js","node_modules/lodash-es/_listCacheSet.js","node_modules/lodash-es/_ListCache.js","node_modules/lodash-es/_Map.js","node_modules/lodash-es/_mapCacheClear.js","node_modules/lodash-es/_isKeyable.js","node_modules/lodash-es/_getMapData.js","node_modules/lodash-es/_mapCacheDelete.js","node_modules/lodash-es/_mapCacheGet.js","node_modules/lodash-es/_mapCacheHas.js","node_modules/lodash-es/_mapCacheSet.js","node_modules/lodash-es/_MapCache.js","node_modules/lodash-es/memoize.js","util/simple-ebml-builder/typedArrayUtils.js","util/simple-ebml-builder/ebml.js","util/simple-ebml-builder/id.js","util/simple-ebml-builder/index.js","util/ebml.js","remuxer/mkv.js","index.entry.js"],"sourcesContent":["/***\r\n * Copyright (C) 2018 Qli5. All Rights Reserved.\r\n * \r\n * @author qli5 <goodlq11[at](163|gmail).com>\r\n * \r\n * This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n*/\r\n\r\nconst _navigator = typeof navigator === 'object' && navigator || { userAgent: 'chrome' };\r\n\r\nconst _Blob = typeof Blob === 'function' && Blob || class {\r\n    constructor(array) {\r\n        return Buffer.concat(array.map(Buffer.from.bind(Buffer)));\r\n    }\r\n};\r\n\r\nconst _TextEncoder = typeof TextEncoder === 'function' && TextEncoder || class {\r\n    /**\r\n     * @param {string} chunk \r\n     * @returns {Uint8Array}\r\n     */\r\n    encode(chunk) {\r\n        return Buffer.from(chunk, 'utf-8');\r\n    }\r\n};\r\n\r\nconst _TextDecoder = typeof TextDecoder === 'function' && TextDecoder || class extends require('string_decoder').StringDecoder {\r\n    /**\r\n     * @param {ArrayBuffer} chunk \r\n     * @returns {string}\r\n     */\r\n    decode(chunk) {\r\n        return this.end(Buffer.from(chunk));\r\n    }\r\n}\r\n\r\nexport { _navigator as navigator, _Blob as Blob, _TextEncoder as TextEncoder, _TextDecoder as TextDecoder };\r\nexport default { navigator: _navigator, Blob: _Blob, TextEncoder: _TextEncoder, TextDecoder: _TextDecoder };\r\n","/***\r\n * The FLV demuxer is from flv.js\r\n * \r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n// I browserified flv.js manually - so that I can know how it works\r\n\r\nimport { navigator } from '../util/shim';\r\n\r\n// import FLVDemuxer from 'flv.js/src/demux/flv-demuxer';\r\n// ..import Log from '../utils/logger.js';\r\nconst Log = {\r\n    e: console.error.bind(console),\r\n    w: console.warn.bind(console),\r\n    i: console.log.bind(console),\r\n    v: console.log.bind(console),\r\n};\r\n\r\n// ..import AMF from './amf-parser.js';\r\n// ....import Log from '../utils/logger.js';\r\n// ....import decodeUTF8 from '../utils/utf8-conv.js';\r\nfunction checkContinuation(uint8array, start, checkLength) {\r\n    let array = uint8array;\r\n    if (start + checkLength < array.length) {\r\n        while (checkLength--) {\r\n            if ((array[++start] & 0xC0) !== 0x80)\r\n                return false;\r\n        }\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction decodeUTF8(uint8array) {\r\n    let out = [];\r\n    let input = uint8array;\r\n    let i = 0;\r\n    let length = uint8array.length;\r\n\r\n    while (i < length) {\r\n        if (input[i] < 0x80) {\r\n            out.push(String.fromCharCode(input[i]));\r\n            ++i;\r\n            continue;\r\n        } else if (input[i] < 0xC0) {\r\n            // fallthrough\r\n        } else if (input[i] < 0xE0) {\r\n            if (checkContinuation(input, i, 1)) {\r\n                let ucs4 = (input[i] & 0x1F) << 6 | (input[i + 1] & 0x3F);\r\n                if (ucs4 >= 0x80) {\r\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\r\n                    i += 2;\r\n                    continue;\r\n                }\r\n            }\r\n        } else if (input[i] < 0xF0) {\r\n            if (checkContinuation(input, i, 2)) {\r\n                let ucs4 = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\r\n                if (ucs4 >= 0x800 && (ucs4 & 0xF800) !== 0xD800) {\r\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\r\n                    i += 3;\r\n                    continue;\r\n                }\r\n            }\r\n        } else if (input[i] < 0xF8) {\r\n            if (checkContinuation(input, i, 3)) {\r\n                let ucs4 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12\r\n                    | (input[i + 2] & 0x3F) << 6 | (input[i + 3] & 0x3F);\r\n                if (ucs4 > 0x10000 && ucs4 < 0x110000) {\r\n                    ucs4 -= 0x10000;\r\n                    out.push(String.fromCharCode((ucs4 >>> 10) | 0xD800));\r\n                    out.push(String.fromCharCode((ucs4 & 0x3FF) | 0xDC00));\r\n                    i += 4;\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        out.push(String.fromCharCode(0xFFFD));\r\n        ++i;\r\n    }\r\n\r\n    return out.join('');\r\n}\r\n\r\n// ....import {IllegalStateException} from '../utils/exception.js';\r\nclass IllegalStateException extends Error { }\r\n\r\nlet le = (function () {\r\n    let buf = new ArrayBuffer(2);\r\n    (new DataView(buf)).setInt16(0, 256, true);  // little-endian write\r\n    return (new Int16Array(buf))[0] === 256;  // platform-spec read, if equal then LE\r\n})();\r\n\r\nclass AMF {\r\n\r\n    static parseScriptData(arrayBuffer, dataOffset, dataSize) {\r\n        let data = {};\r\n\r\n        try {\r\n            let name = AMF.parseValue(arrayBuffer, dataOffset, dataSize);\r\n            let value = AMF.parseValue(arrayBuffer, dataOffset + name.size, dataSize - name.size);\r\n\r\n            data[name.data] = value.data;\r\n        } catch (e) {\r\n            Log.e('AMF', e.toString());\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    static parseObject(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 3) {\r\n            throw new IllegalStateException('Data not enough when parse ScriptDataObject');\r\n        }\r\n        let name = AMF.parseString(arrayBuffer, dataOffset, dataSize);\r\n        let value = AMF.parseValue(arrayBuffer, dataOffset + name.size, dataSize - name.size);\r\n        let isObjectEnd = value.objectEnd;\r\n\r\n        return {\r\n            data: {\r\n                name: name.data,\r\n                value: value.data\r\n            },\r\n            size: name.size + value.size,\r\n            objectEnd: isObjectEnd\r\n        };\r\n    }\r\n\r\n    static parseVariable(arrayBuffer, dataOffset, dataSize) {\r\n        return AMF.parseObject(arrayBuffer, dataOffset, dataSize);\r\n    }\r\n\r\n    static parseString(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 2) {\r\n            throw new IllegalStateException('Data not enough when parse String');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let length = v.getUint16(0, !le);\r\n\r\n        let str;\r\n        if (length > 0) {\r\n            str = decodeUTF8(new Uint8Array(arrayBuffer, dataOffset + 2, length));\r\n        } else {\r\n            str = '';\r\n        }\r\n\r\n        return {\r\n            data: str,\r\n            size: 2 + length\r\n        };\r\n    }\r\n\r\n    static parseLongString(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 4) {\r\n            throw new IllegalStateException('Data not enough when parse LongString');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let length = v.getUint32(0, !le);\r\n\r\n        let str;\r\n        if (length > 0) {\r\n            str = decodeUTF8(new Uint8Array(arrayBuffer, dataOffset + 4, length));\r\n        } else {\r\n            str = '';\r\n        }\r\n\r\n        return {\r\n            data: str,\r\n            size: 4 + length\r\n        };\r\n    }\r\n\r\n    static parseDate(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 10) {\r\n            throw new IllegalStateException('Data size invalid when parse Date');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let timestamp = v.getFloat64(0, !le);\r\n        let localTimeOffset = v.getInt16(8, !le);\r\n        timestamp += localTimeOffset * 60 * 1000;  // get UTC time\r\n\r\n        return {\r\n            data: new Date(timestamp),\r\n            size: 8 + 2\r\n        };\r\n    }\r\n\r\n    static parseValue(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 1) {\r\n            throw new IllegalStateException('Data not enough when parse Value');\r\n        }\r\n\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let offset = 1;\r\n        let type = v.getUint8(0);\r\n        let value;\r\n        let objectEnd = false;\r\n\r\n        try {\r\n            switch (type) {\r\n                case 0:  // Number(Double) type\r\n                    value = v.getFloat64(1, !le);\r\n                    offset += 8;\r\n                    break;\r\n                case 1: {  // Boolean type\r\n                    let b = v.getUint8(1);\r\n                    value = b ? true : false;\r\n                    offset += 1;\r\n                    break;\r\n                }\r\n                case 2: {  // String type\r\n                    let amfstr = AMF.parseString(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = amfstr.data;\r\n                    offset += amfstr.size;\r\n                    break;\r\n                }\r\n                case 3: { // Object(s) type\r\n                    value = {};\r\n                    let terminal = 0;  // workaround for malformed Objects which has missing ScriptDataObjectEnd\r\n                    if ((v.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\r\n                        terminal = 3;\r\n                    }\r\n                    while (offset < dataSize - 4) {  // 4 === type(UI8) + ScriptDataObjectEnd(UI24)\r\n                        let amfobj = AMF.parseObject(arrayBuffer, dataOffset + offset, dataSize - offset - terminal);\r\n                        if (amfobj.objectEnd)\r\n                            break;\r\n                        value[amfobj.data.name] = amfobj.data.value;\r\n                        offset += amfobj.size;\r\n                    }\r\n                    if (offset <= dataSize - 3) {\r\n                        let marker = v.getUint32(offset - 1, !le) & 0x00FFFFFF;\r\n                        if (marker === 9) {\r\n                            offset += 3;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 8: { // ECMA array type (Mixed array)\r\n                    value = {};\r\n                    offset += 4;  // ECMAArrayLength(UI32)\r\n                    let terminal = 0;  // workaround for malformed MixedArrays which has missing ScriptDataObjectEnd\r\n                    if ((v.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\r\n                        terminal = 3;\r\n                    }\r\n                    while (offset < dataSize - 8) {  // 8 === type(UI8) + ECMAArrayLength(UI32) + ScriptDataVariableEnd(UI24)\r\n                        let amfvar = AMF.parseVariable(arrayBuffer, dataOffset + offset, dataSize - offset - terminal);\r\n                        if (amfvar.objectEnd)\r\n                            break;\r\n                        value[amfvar.data.name] = amfvar.data.value;\r\n                        offset += amfvar.size;\r\n                    }\r\n                    if (offset <= dataSize - 3) {\r\n                        let marker = v.getUint32(offset - 1, !le) & 0x00FFFFFF;\r\n                        if (marker === 9) {\r\n                            offset += 3;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 9:  // ScriptDataObjectEnd\r\n                    value = undefined;\r\n                    offset = 1;\r\n                    objectEnd = true;\r\n                    break;\r\n                case 10: {  // Strict array type\r\n                    // ScriptDataValue[n]. NOTE: according to video_file_format_spec_v10_1.pdf\r\n                    value = [];\r\n                    let strictArrayLength = v.getUint32(1, !le);\r\n                    offset += 4;\r\n                    for (let i = 0; i < strictArrayLength; i++) {\r\n                        let val = AMF.parseValue(arrayBuffer, dataOffset + offset, dataSize - offset);\r\n                        value.push(val.data);\r\n                        offset += val.size;\r\n                    }\r\n                    break;\r\n                }\r\n                case 11: {  // Date type\r\n                    let date = AMF.parseDate(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = date.data;\r\n                    offset += date.size;\r\n                    break;\r\n                }\r\n                case 12: {  // Long string type\r\n                    let amfLongStr = AMF.parseString(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = amfLongStr.data;\r\n                    offset += amfLongStr.size;\r\n                    break;\r\n                }\r\n                default:\r\n                    // ignore and skip\r\n                    offset = dataSize;\r\n                    Log.w('AMF', 'Unsupported AMF value type ' + type);\r\n            }\r\n        } catch (e) {\r\n            Log.e('AMF', e.toString());\r\n        }\r\n\r\n        return {\r\n            data: value,\r\n            size: offset,\r\n            objectEnd: objectEnd\r\n        };\r\n    }\r\n\r\n}\r\n\r\n// ..import SPSParser from './sps-parser.js';\r\n// ....import ExpGolomb from './exp-golomb.js';\r\n// ......import {IllegalStateException, InvalidArgumentException} from '../utils/exception.js';\r\nclass InvalidArgumentException extends Error { }\r\n\r\nclass ExpGolomb {\r\n\r\n    constructor(uint8array) {\r\n        this.TAG = 'ExpGolomb';\r\n\r\n        this._buffer = uint8array;\r\n        this._buffer_index = 0;\r\n        this._total_bytes = uint8array.byteLength;\r\n        this._total_bits = uint8array.byteLength * 8;\r\n        this._current_word = 0;\r\n        this._current_word_bits_left = 0;\r\n    }\r\n\r\n    destroy() {\r\n        this._buffer = null;\r\n    }\r\n\r\n    _fillCurrentWord() {\r\n        let buffer_bytes_left = this._total_bytes - this._buffer_index;\r\n        if (buffer_bytes_left <= 0)\r\n            throw new IllegalStateException('ExpGolomb: _fillCurrentWord() but no bytes available');\r\n\r\n        let bytes_read = Math.min(4, buffer_bytes_left);\r\n        let word = new Uint8Array(4);\r\n        word.set(this._buffer.subarray(this._buffer_index, this._buffer_index + bytes_read));\r\n        this._current_word = new DataView(word.buffer).getUint32(0, false);\r\n\r\n        this._buffer_index += bytes_read;\r\n        this._current_word_bits_left = bytes_read * 8;\r\n    }\r\n\r\n    readBits(bits) {\r\n        if (bits > 32)\r\n            throw new InvalidArgumentException('ExpGolomb: readBits() bits exceeded max 32bits!');\r\n\r\n        if (bits <= this._current_word_bits_left) {\r\n            let result = this._current_word >>> (32 - bits);\r\n            this._current_word <<= bits;\r\n            this._current_word_bits_left -= bits;\r\n            return result;\r\n        }\r\n\r\n        let result = this._current_word_bits_left ? this._current_word : 0;\r\n        result = result >>> (32 - this._current_word_bits_left);\r\n        let bits_need_left = bits - this._current_word_bits_left;\r\n\r\n        this._fillCurrentWord();\r\n        let bits_read_next = Math.min(bits_need_left, this._current_word_bits_left);\r\n\r\n        let result2 = this._current_word >>> (32 - bits_read_next);\r\n        this._current_word <<= bits_read_next;\r\n        this._current_word_bits_left -= bits_read_next;\r\n\r\n        result = (result << bits_read_next) | result2;\r\n        return result;\r\n    }\r\n\r\n    readBool() {\r\n        return this.readBits(1) === 1;\r\n    }\r\n\r\n    readByte() {\r\n        return this.readBits(8);\r\n    }\r\n\r\n    _skipLeadingZero() {\r\n        let zero_count;\r\n        for (zero_count = 0; zero_count < this._current_word_bits_left; zero_count++) {\r\n            if (0 !== (this._current_word & (0x80000000 >>> zero_count))) {\r\n                this._current_word <<= zero_count;\r\n                this._current_word_bits_left -= zero_count;\r\n                return zero_count;\r\n            }\r\n        }\r\n        this._fillCurrentWord();\r\n        return zero_count + this._skipLeadingZero();\r\n    }\r\n\r\n    readUEG() {  // unsigned exponential golomb\r\n        let leading_zeros = this._skipLeadingZero();\r\n        return this.readBits(leading_zeros + 1) - 1;\r\n    }\r\n\r\n    readSEG() {  // signed exponential golomb\r\n        let value = this.readUEG();\r\n        if (value & 0x01) {\r\n            return (value + 1) >>> 1;\r\n        } else {\r\n            return -1 * (value >>> 1);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nclass SPSParser {\r\n\r\n    static _ebsp2rbsp(uint8array) {\r\n        let src = uint8array;\r\n        let src_length = src.byteLength;\r\n        let dst = new Uint8Array(src_length);\r\n        let dst_idx = 0;\r\n\r\n        for (let i = 0; i < src_length; i++) {\r\n            if (i >= 2) {\r\n                // Unescape: Skip 0x03 after 00 00\r\n                if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\r\n                    continue;\r\n                }\r\n            }\r\n            dst[dst_idx] = src[i];\r\n            dst_idx++;\r\n        }\r\n\r\n        return new Uint8Array(dst.buffer, 0, dst_idx);\r\n    }\r\n\r\n    static parseSPS(uint8array) {\r\n        let rbsp = SPSParser._ebsp2rbsp(uint8array);\r\n        let gb = new ExpGolomb(rbsp);\r\n\r\n        gb.readByte();\r\n        let profile_idc = gb.readByte();  // profile_idc\r\n        gb.readByte();  // constraint_set_flags[5] + reserved_zero[3]\r\n        let level_idc = gb.readByte();  // level_idc\r\n        gb.readUEG();  // seq_parameter_set_id\r\n\r\n        let profile_string = SPSParser.getProfileString(profile_idc);\r\n        let level_string = SPSParser.getLevelString(level_idc);\r\n        let chroma_format_idc = 1;\r\n        let chroma_format = 420;\r\n        let chroma_format_table = [0, 420, 422, 444];\r\n        let bit_depth = 8;\r\n\r\n        if (profile_idc === 100 || profile_idc === 110 || profile_idc === 122 ||\r\n            profile_idc === 244 || profile_idc === 44 || profile_idc === 83 ||\r\n            profile_idc === 86 || profile_idc === 118 || profile_idc === 128 ||\r\n            profile_idc === 138 || profile_idc === 144) {\r\n\r\n            chroma_format_idc = gb.readUEG();\r\n            if (chroma_format_idc === 3) {\r\n                gb.readBits(1);  // separate_colour_plane_flag\r\n            }\r\n            if (chroma_format_idc <= 3) {\r\n                chroma_format = chroma_format_table[chroma_format_idc];\r\n            }\r\n\r\n            bit_depth = gb.readUEG() + 8;  // bit_depth_luma_minus8\r\n            gb.readUEG();  // bit_depth_chroma_minus8\r\n            gb.readBits(1);  // qpprime_y_zero_transform_bypass_flag\r\n            if (gb.readBool()) {  // seq_scaling_matrix_present_flag\r\n                let scaling_list_count = (chroma_format_idc !== 3) ? 8 : 12;\r\n                for (let i = 0; i < scaling_list_count; i++) {\r\n                    if (gb.readBool()) {  // seq_scaling_list_present_flag\r\n                        if (i < 6) {\r\n                            SPSParser._skipScalingList(gb, 16);\r\n                        } else {\r\n                            SPSParser._skipScalingList(gb, 64);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        gb.readUEG();  // log2_max_frame_num_minus4\r\n        let pic_order_cnt_type = gb.readUEG();\r\n        if (pic_order_cnt_type === 0) {\r\n            gb.readUEG();  // log2_max_pic_order_cnt_lsb_minus_4\r\n        } else if (pic_order_cnt_type === 1) {\r\n            gb.readBits(1);  // delta_pic_order_always_zero_flag\r\n            gb.readSEG();  // offset_for_non_ref_pic\r\n            gb.readSEG();  // offset_for_top_to_bottom_field\r\n            let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\r\n            for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\r\n                gb.readSEG();  // offset_for_ref_frame\r\n            }\r\n        }\r\n        gb.readUEG();  // max_num_ref_frames\r\n        gb.readBits(1);  // gaps_in_frame_num_value_allowed_flag\r\n\r\n        let pic_width_in_mbs_minus1 = gb.readUEG();\r\n        let pic_height_in_map_units_minus1 = gb.readUEG();\r\n\r\n        let frame_mbs_only_flag = gb.readBits(1);\r\n        if (frame_mbs_only_flag === 0) {\r\n            gb.readBits(1);  // mb_adaptive_frame_field_flag\r\n        }\r\n        gb.readBits(1);  // direct_8x8_inference_flag\r\n\r\n        let frame_crop_left_offset = 0;\r\n        let frame_crop_right_offset = 0;\r\n        let frame_crop_top_offset = 0;\r\n        let frame_crop_bottom_offset = 0;\r\n\r\n        let frame_cropping_flag = gb.readBool();\r\n        if (frame_cropping_flag) {\r\n            frame_crop_left_offset = gb.readUEG();\r\n            frame_crop_right_offset = gb.readUEG();\r\n            frame_crop_top_offset = gb.readUEG();\r\n            frame_crop_bottom_offset = gb.readUEG();\r\n        }\r\n\r\n        let sar_width = 1, sar_height = 1;\r\n        let fps = 0, fps_fixed = true, fps_num = 0, fps_den = 0;\r\n\r\n        let vui_parameters_present_flag = gb.readBool();\r\n        if (vui_parameters_present_flag) {\r\n            if (gb.readBool()) {  // aspect_ratio_info_present_flag\r\n                let aspect_ratio_idc = gb.readByte();\r\n                let sar_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\r\n                let sar_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\r\n\r\n                if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\r\n                    sar_width = sar_w_table[aspect_ratio_idc - 1];\r\n                    sar_height = sar_h_table[aspect_ratio_idc - 1];\r\n                } else if (aspect_ratio_idc === 255) {\r\n                    sar_width = gb.readByte() << 8 | gb.readByte();\r\n                    sar_height = gb.readByte() << 8 | gb.readByte();\r\n                }\r\n            }\r\n\r\n            if (gb.readBool()) {  // overscan_info_present_flag\r\n                gb.readBool();  // overscan_appropriate_flag\r\n            }\r\n            if (gb.readBool()) {  // video_signal_type_present_flag\r\n                gb.readBits(4);  // video_format & video_full_range_flag\r\n                if (gb.readBool()) {  // colour_description_present_flag\r\n                    gb.readBits(24);  // colour_primaries & transfer_characteristics & matrix_coefficients\r\n                }\r\n            }\r\n            if (gb.readBool()) {  // chroma_loc_info_present_flag\r\n                gb.readUEG();  // chroma_sample_loc_type_top_field\r\n                gb.readUEG();  // chroma_sample_loc_type_bottom_field\r\n            }\r\n            if (gb.readBool()) {  // timing_info_present_flag\r\n                let num_units_in_tick = gb.readBits(32);\r\n                let time_scale = gb.readBits(32);\r\n                fps_fixed = gb.readBool();  // fixed_frame_rate_flag\r\n\r\n                fps_num = time_scale;\r\n                fps_den = num_units_in_tick * 2;\r\n                fps = fps_num / fps_den;\r\n            }\r\n        }\r\n\r\n        let sarScale = 1;\r\n        if (sar_width !== 1 || sar_height !== 1) {\r\n            sarScale = sar_width / sar_height;\r\n        }\r\n\r\n        let crop_unit_x = 0, crop_unit_y = 0;\r\n        if (chroma_format_idc === 0) {\r\n            crop_unit_x = 1;\r\n            crop_unit_y = 2 - frame_mbs_only_flag;\r\n        } else {\r\n            let sub_wc = (chroma_format_idc === 3) ? 1 : 2;\r\n            let sub_hc = (chroma_format_idc === 1) ? 2 : 1;\r\n            crop_unit_x = sub_wc;\r\n            crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\r\n        }\r\n\r\n        let codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\r\n        let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\r\n\r\n        codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\r\n        codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\r\n\r\n        let present_width = Math.ceil(codec_width * sarScale);\r\n\r\n        gb.destroy();\r\n        gb = null;\r\n\r\n        return {\r\n            profile_string: profile_string,  // baseline, high, high10, ...\r\n            level_string: level_string,  // 3, 3.1, 4, 4.1, 5, 5.1, ...\r\n            bit_depth: bit_depth,  // 8bit, 10bit, ...\r\n            chroma_format: chroma_format,  // 4:2:0, 4:2:2, ...\r\n            chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\r\n\r\n            frame_rate: {\r\n                fixed: fps_fixed,\r\n                fps: fps,\r\n                fps_den: fps_den,\r\n                fps_num: fps_num\r\n            },\r\n\r\n            sar_ratio: {\r\n                width: sar_width,\r\n                height: sar_height\r\n            },\r\n\r\n            codec_size: {\r\n                width: codec_width,\r\n                height: codec_height\r\n            },\r\n\r\n            present_size: {\r\n                width: present_width,\r\n                height: codec_height\r\n            }\r\n        };\r\n    }\r\n\r\n    static _skipScalingList(gb, count) {\r\n        let last_scale = 8, next_scale = 8;\r\n        let delta_scale = 0;\r\n        for (let i = 0; i < count; i++) {\r\n            if (next_scale !== 0) {\r\n                delta_scale = gb.readSEG();\r\n                next_scale = (last_scale + delta_scale + 256) % 256;\r\n            }\r\n            last_scale = (next_scale === 0) ? last_scale : next_scale;\r\n        }\r\n    }\r\n\r\n    static getProfileString(profile_idc) {\r\n        switch (profile_idc) {\r\n            case 66:\r\n                return 'Baseline';\r\n            case 77:\r\n                return 'Main';\r\n            case 88:\r\n                return 'Extended';\r\n            case 100:\r\n                return 'High';\r\n            case 110:\r\n                return 'High10';\r\n            case 122:\r\n                return 'High422';\r\n            case 244:\r\n                return 'High444';\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }\r\n\r\n    static getLevelString(level_idc) {\r\n        return (level_idc / 10).toFixed(1);\r\n    }\r\n\r\n    static getChromaFormatString(chroma) {\r\n        switch (chroma) {\r\n            case 420:\r\n                return '4:2:0';\r\n            case 422:\r\n                return '4:2:2';\r\n            case 444:\r\n                return '4:4:4';\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// ..import DemuxErrors from './demux-errors.js';\r\nconst DemuxErrors = {\r\n    OK: 'OK',\r\n    FORMAT_ERROR: 'FormatError',\r\n    FORMAT_UNSUPPORTED: 'FormatUnsupported',\r\n    CODEC_UNSUPPORTED: 'CodecUnsupported'\r\n};\r\n\r\n// ..import MediaInfo from '../core/media-info.js';\r\nclass MediaInfo {\r\n\r\n    constructor() {\r\n        this.mimeType = null;\r\n        this.duration = null;\r\n\r\n        this.hasAudio = null;\r\n        this.hasVideo = null;\r\n        this.audioCodec = null;\r\n        this.videoCodec = null;\r\n        this.audioDataRate = null;\r\n        this.videoDataRate = null;\r\n\r\n        this.audioSampleRate = null;\r\n        this.audioChannelCount = null;\r\n\r\n        this.width = null;\r\n        this.height = null;\r\n        this.fps = null;\r\n        this.profile = null;\r\n        this.level = null;\r\n        this.chromaFormat = null;\r\n        this.sarNum = null;\r\n        this.sarDen = null;\r\n\r\n        this.metadata = null;\r\n        this.segments = null;  // MediaInfo[]\r\n        this.segmentCount = null;\r\n        this.hasKeyframesIndex = null;\r\n        this.keyframesIndex = null;\r\n    }\r\n\r\n    isComplete() {\r\n        let audioInfoComplete = (this.hasAudio === false) ||\r\n            (this.hasAudio === true &&\r\n                this.audioCodec != null &&\r\n                this.audioSampleRate != null &&\r\n                this.audioChannelCount != null);\r\n\r\n        let videoInfoComplete = (this.hasVideo === false) ||\r\n            (this.hasVideo === true &&\r\n                this.videoCodec != null &&\r\n                this.width != null &&\r\n                this.height != null &&\r\n                this.fps != null &&\r\n                this.profile != null &&\r\n                this.level != null &&\r\n                this.chromaFormat != null &&\r\n                this.sarNum != null &&\r\n                this.sarDen != null);\r\n\r\n        // keyframesIndex may not be present\r\n        return this.mimeType != null &&\r\n            this.duration != null &&\r\n            this.metadata != null &&\r\n            this.hasKeyframesIndex != null &&\r\n            audioInfoComplete &&\r\n            videoInfoComplete;\r\n    }\r\n\r\n    isSeekable() {\r\n        return this.hasKeyframesIndex === true;\r\n    }\r\n\r\n    getNearestKeyframe(milliseconds) {\r\n        if (this.keyframesIndex == null) {\r\n            return null;\r\n        }\r\n\r\n        let table = this.keyframesIndex;\r\n        let keyframeIdx = this._search(table.times, milliseconds);\r\n\r\n        return {\r\n            index: keyframeIdx,\r\n            milliseconds: table.times[keyframeIdx],\r\n            fileposition: table.filepositions[keyframeIdx]\r\n        };\r\n    }\r\n\r\n    _search(list, value) {\r\n        let idx = 0;\r\n\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        if (value < list[0]) {\r\n            idx = 0;\r\n            lbound = ubound + 1;  // skip search\r\n        }\r\n\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (value >= list[mid] && value < list[mid + 1])) {\r\n                idx = mid;\r\n                break;\r\n            } else if (list[mid] < value) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n\r\n        return idx;\r\n    }\r\n\r\n}\r\n\r\nfunction Swap16(src) {\r\n    return (((src >>> 8) & 0xFF) |\r\n        ((src & 0xFF) << 8));\r\n}\r\n\r\nfunction Swap32(src) {\r\n    return (((src & 0xFF000000) >>> 24) |\r\n        ((src & 0x00FF0000) >>> 8) |\r\n        ((src & 0x0000FF00) << 8) |\r\n        ((src & 0x000000FF) << 24));\r\n}\r\n\r\nfunction ReadBig32(array, index) {\r\n    return ((array[index] << 24) |\r\n        (array[index + 1] << 16) |\r\n        (array[index + 2] << 8) |\r\n        (array[index + 3]));\r\n}\r\n\r\nclass FLVDemuxer {\r\n\r\n    /**\r\n     * Create a new FLV demuxer\r\n     * @param {Object} probeData\r\n     * @param {boolean} probeData.match\r\n     * @param {number} probeData.consumed\r\n     * @param {number} probeData.dataOffset\r\n     * @param {booleam} probeData.hasAudioTrack\r\n     * @param {boolean} probeData.hasVideoTrack\r\n     * @param {*} config \r\n     */\r\n    constructor(probeData, config) {\r\n        this.TAG = 'FLVDemuxer';\r\n\r\n        this._config = config;\r\n\r\n        this._onError = null;\r\n        this._onMediaInfo = null;\r\n        this._onTrackMetadata = null;\r\n        this._onDataAvailable = null;\r\n\r\n        this._dataOffset = probeData.dataOffset;\r\n        this._firstParse = true;\r\n        this._dispatch = false;\r\n\r\n        this._hasAudio = probeData.hasAudioTrack;\r\n        this._hasVideo = probeData.hasVideoTrack;\r\n\r\n        this._hasAudioFlagOverrided = false;\r\n        this._hasVideoFlagOverrided = false;\r\n\r\n        this._audioInitialMetadataDispatched = false;\r\n        this._videoInitialMetadataDispatched = false;\r\n\r\n        this._mediaInfo = new MediaInfo();\r\n        this._mediaInfo.hasAudio = this._hasAudio;\r\n        this._mediaInfo.hasVideo = this._hasVideo;\r\n        this._metadata = null;\r\n        this._audioMetadata = null;\r\n        this._videoMetadata = null;\r\n\r\n        this._naluLengthSize = 4;\r\n        this._timestampBase = 0;  // int32, in milliseconds\r\n        this._timescale = 1000;\r\n        this._duration = 0;  // int32, in milliseconds\r\n        this._durationOverrided = false;\r\n        this._referenceFrameRate = {\r\n            fixed: true,\r\n            fps: 23.976,\r\n            fps_num: 23976,\r\n            fps_den: 1000\r\n        };\r\n\r\n        this._flvSoundRateTable = [5500, 11025, 22050, 44100, 48000];\r\n\r\n        this._mpegSamplingRates = [\r\n            96000, 88200, 64000, 48000, 44100, 32000,\r\n            24000, 22050, 16000, 12000, 11025, 8000, 7350\r\n        ];\r\n\r\n        this._mpegAudioV10SampleRateTable = [44100, 48000, 32000, 0];\r\n        this._mpegAudioV20SampleRateTable = [22050, 24000, 16000, 0];\r\n        this._mpegAudioV25SampleRateTable = [11025, 12000, 8000, 0];\r\n\r\n        this._mpegAudioL1BitRateTable = [0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, -1];\r\n        this._mpegAudioL2BitRateTable = [0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, -1];\r\n        this._mpegAudioL3BitRateTable = [0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, -1];\r\n\r\n        this._videoTrack = { type: 'video', id: 1, sequenceNumber: 0, samples: [], length: 0 };\r\n        this._audioTrack = { type: 'audio', id: 2, sequenceNumber: 0, samples: [], length: 0 };\r\n\r\n        this._littleEndian = (function () {\r\n            let buf = new ArrayBuffer(2);\r\n            (new DataView(buf)).setInt16(0, 256, true);  // little-endian write\r\n            return (new Int16Array(buf))[0] === 256;  // platform-spec read, if equal then LE\r\n        })();\r\n    }\r\n\r\n    destroy() {\r\n        this._mediaInfo = null;\r\n        this._metadata = null;\r\n        this._audioMetadata = null;\r\n        this._videoMetadata = null;\r\n        this._videoTrack = null;\r\n        this._audioTrack = null;\r\n\r\n        this._onError = null;\r\n        this._onMediaInfo = null;\r\n        this._onTrackMetadata = null;\r\n        this._onDataAvailable = null;\r\n    }\r\n\r\n    /**\r\n     * Probe the flv data\r\n     * @param {ArrayBuffer} buffer\r\n     * @returns {Object} - probeData to be feed into constructor\r\n     */\r\n    static probe(buffer) {\r\n        let data = new Uint8Array(buffer);\r\n        let mismatch = { match: false };\r\n\r\n        if (data[0] !== 0x46 || data[1] !== 0x4C || data[2] !== 0x56 || data[3] !== 0x01) {\r\n            return mismatch;\r\n        }\r\n\r\n        let hasAudio = ((data[4] & 4) >>> 2) !== 0;\r\n        let hasVideo = (data[4] & 1) !== 0;\r\n\r\n        let offset = ReadBig32(data, 5);\r\n\r\n        if (offset < 9) {\r\n            return mismatch;\r\n        }\r\n\r\n        return {\r\n            match: true,\r\n            consumed: offset,\r\n            dataOffset: offset,\r\n            hasAudioTrack: hasAudio,\r\n            hasVideoTrack: hasVideo\r\n        };\r\n    }\r\n\r\n    bindDataSource(loader) {\r\n        loader.onDataArrival = this.parseChunks.bind(this);\r\n        return this;\r\n    }\r\n\r\n    // prototype: function(type: string, metadata: any): void\r\n    get onTrackMetadata() {\r\n        return this._onTrackMetadata;\r\n    }\r\n\r\n    set onTrackMetadata(callback) {\r\n        this._onTrackMetadata = callback;\r\n    }\r\n\r\n    // prototype: function(mediaInfo: MediaInfo): void\r\n    get onMediaInfo() {\r\n        return this._onMediaInfo;\r\n    }\r\n\r\n    set onMediaInfo(callback) {\r\n        this._onMediaInfo = callback;\r\n    }\r\n\r\n    // prototype: function(type: number, info: string): void\r\n    get onError() {\r\n        return this._onError;\r\n    }\r\n\r\n    set onError(callback) {\r\n        this._onError = callback;\r\n    }\r\n\r\n    // prototype: function(videoTrack: any, audioTrack: any): void\r\n    get onDataAvailable() {\r\n        return this._onDataAvailable;\r\n    }\r\n\r\n    set onDataAvailable(callback) {\r\n        this._onDataAvailable = callback;\r\n    }\r\n\r\n    // timestamp base for output samples, must be in milliseconds\r\n    get timestampBase() {\r\n        return this._timestampBase;\r\n    }\r\n\r\n    set timestampBase(base) {\r\n        this._timestampBase = base;\r\n    }\r\n\r\n    get overridedDuration() {\r\n        return this._duration;\r\n    }\r\n\r\n    // Force-override media duration. Must be in milliseconds, int32\r\n    set overridedDuration(duration) {\r\n        this._durationOverrided = true;\r\n        this._duration = duration;\r\n        this._mediaInfo.duration = duration;\r\n    }\r\n\r\n    // Force-override audio track present flag, boolean\r\n    set overridedHasAudio(hasAudio) {\r\n        this._hasAudioFlagOverrided = true;\r\n        this._hasAudio = hasAudio;\r\n        this._mediaInfo.hasAudio = hasAudio;\r\n    }\r\n\r\n    // Force-override video track present flag, boolean\r\n    set overridedHasVideo(hasVideo) {\r\n        this._hasVideoFlagOverrided = true;\r\n        this._hasVideo = hasVideo;\r\n        this._mediaInfo.hasVideo = hasVideo;\r\n    }\r\n\r\n    resetMediaInfo() {\r\n        this._mediaInfo = new MediaInfo();\r\n    }\r\n\r\n    _isInitialMetadataDispatched() {\r\n        if (this._hasAudio && this._hasVideo) {  // both audio & video\r\n            return this._audioInitialMetadataDispatched && this._videoInitialMetadataDispatched;\r\n        }\r\n        if (this._hasAudio && !this._hasVideo) {  // audio only\r\n            return this._audioInitialMetadataDispatched;\r\n        }\r\n        if (!this._hasAudio && this._hasVideo) {  // video only\r\n            return this._videoInitialMetadataDispatched;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // function parseChunks(chunk: ArrayBuffer, byteStart: number): number;\r\n    parseChunks(chunk, byteStart) {\r\n        if (!this._onError || !this._onMediaInfo || !this._onTrackMetadata || !this._onDataAvailable) {\r\n            throw new IllegalStateException('Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified');\r\n        }\r\n\r\n        // qli5: fix nonzero byteStart\r\n        let offset = byteStart || 0;\r\n        let le = this._littleEndian;\r\n\r\n        if (byteStart === 0) {  // buffer with FLV header\r\n            if (chunk.byteLength > 13) {\r\n                let probeData = FLVDemuxer.probe(chunk);\r\n                offset = probeData.dataOffset;\r\n            } else {\r\n                return 0;\r\n            }\r\n        }\r\n\r\n        if (this._firstParse) {  // handle PreviousTagSize0 before Tag1\r\n            this._firstParse = false;\r\n            if (offset !== this._dataOffset) {\r\n                Log.w(this.TAG, 'First time parsing but chunk byteStart invalid!');\r\n            }\r\n\r\n            let v = new DataView(chunk, offset);\r\n            let prevTagSize0 = v.getUint32(0, !le);\r\n            if (prevTagSize0 !== 0) {\r\n                Log.w(this.TAG, 'PrevTagSize0 !== 0 !!!');\r\n            }\r\n            offset += 4;\r\n        }\r\n\r\n        while (offset < chunk.byteLength) {\r\n            this._dispatch = true;\r\n\r\n            let v = new DataView(chunk, offset);\r\n\r\n            if (offset + 11 + 4 > chunk.byteLength) {\r\n                // data not enough for parsing an flv tag\r\n                break;\r\n            }\r\n\r\n            let tagType = v.getUint8(0);\r\n            let dataSize = v.getUint32(0, !le) & 0x00FFFFFF;\r\n\r\n            if (offset + 11 + dataSize + 4 > chunk.byteLength) {\r\n                // data not enough for parsing actual data body\r\n                break;\r\n            }\r\n\r\n            if (tagType !== 8 && tagType !== 9 && tagType !== 18) {\r\n                Log.w(this.TAG, `Unsupported tag type ${tagType}, skipped`);\r\n                // consume the whole tag (skip it)\r\n                offset += 11 + dataSize + 4;\r\n                continue;\r\n            }\r\n\r\n            let ts2 = v.getUint8(4);\r\n            let ts1 = v.getUint8(5);\r\n            let ts0 = v.getUint8(6);\r\n            let ts3 = v.getUint8(7);\r\n\r\n            let timestamp = ts0 | (ts1 << 8) | (ts2 << 16) | (ts3 << 24);\r\n\r\n            let streamId = v.getUint32(7, !le) & 0x00FFFFFF;\r\n            if (streamId !== 0) {\r\n                Log.w(this.TAG, 'Meet tag which has StreamID != 0!');\r\n            }\r\n\r\n            let dataOffset = offset + 11;\r\n\r\n            switch (tagType) {\r\n                case 8:  // Audio\r\n                    this._parseAudioData(chunk, dataOffset, dataSize, timestamp);\r\n                    break;\r\n                case 9:  // Video\r\n                    this._parseVideoData(chunk, dataOffset, dataSize, timestamp, byteStart + offset);\r\n                    break;\r\n                case 18:  // ScriptDataObject\r\n                    this._parseScriptData(chunk, dataOffset, dataSize);\r\n                    break;\r\n            }\r\n\r\n            let prevTagSize = v.getUint32(11 + dataSize, !le);\r\n            if (prevTagSize !== 11 + dataSize) {\r\n                Log.w(this.TAG, `Invalid PrevTagSize ${prevTagSize}`);\r\n            }\r\n\r\n            offset += 11 + dataSize + 4;  // tagBody + dataSize + prevTagSize\r\n        }\r\n\r\n        // dispatch parsed frames to consumer (typically, the remuxer)\r\n        if (this._isInitialMetadataDispatched()) {\r\n            if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n            }\r\n        }\r\n\r\n        return offset;  // consumed bytes, just equals latest offset index\r\n    }\r\n\r\n    _parseScriptData(arrayBuffer, dataOffset, dataSize) {\r\n        let scriptData = AMF.parseScriptData(arrayBuffer, dataOffset, dataSize);\r\n\r\n        if (scriptData.hasOwnProperty('onMetaData')) {\r\n            if (scriptData.onMetaData == null || typeof scriptData.onMetaData !== 'object') {\r\n                Log.w(this.TAG, 'Invalid onMetaData structure!');\r\n                return;\r\n            }\r\n            if (this._metadata) {\r\n                Log.w(this.TAG, 'Found another onMetaData tag!');\r\n            }\r\n            this._metadata = scriptData;\r\n            let onMetaData = this._metadata.onMetaData;\r\n\r\n            if (typeof onMetaData.hasAudio === 'boolean') {  // hasAudio\r\n                if (this._hasAudioFlagOverrided === false) {\r\n                    this._hasAudio = onMetaData.hasAudio;\r\n                    this._mediaInfo.hasAudio = this._hasAudio;\r\n                }\r\n            }\r\n            if (typeof onMetaData.hasVideo === 'boolean') {  // hasVideo\r\n                if (this._hasVideoFlagOverrided === false) {\r\n                    this._hasVideo = onMetaData.hasVideo;\r\n                    this._mediaInfo.hasVideo = this._hasVideo;\r\n                }\r\n            }\r\n            if (typeof onMetaData.audiodatarate === 'number') {  // audiodatarate\r\n                this._mediaInfo.audioDataRate = onMetaData.audiodatarate;\r\n            }\r\n            if (typeof onMetaData.videodatarate === 'number') {  // videodatarate\r\n                this._mediaInfo.videoDataRate = onMetaData.videodatarate;\r\n            }\r\n            if (typeof onMetaData.width === 'number') {  // width\r\n                this._mediaInfo.width = onMetaData.width;\r\n            }\r\n            if (typeof onMetaData.height === 'number') {  // height\r\n                this._mediaInfo.height = onMetaData.height;\r\n            }\r\n            if (typeof onMetaData.duration === 'number') {  // duration\r\n                if (!this._durationOverrided) {\r\n                    let duration = Math.floor(onMetaData.duration * this._timescale);\r\n                    this._duration = duration;\r\n                    this._mediaInfo.duration = duration;\r\n                }\r\n            } else {\r\n                this._mediaInfo.duration = 0;\r\n            }\r\n            if (typeof onMetaData.framerate === 'number') {  // framerate\r\n                let fps_num = Math.floor(onMetaData.framerate * 1000);\r\n                if (fps_num > 0) {\r\n                    let fps = fps_num / 1000;\r\n                    this._referenceFrameRate.fixed = true;\r\n                    this._referenceFrameRate.fps = fps;\r\n                    this._referenceFrameRate.fps_num = fps_num;\r\n                    this._referenceFrameRate.fps_den = 1000;\r\n                    this._mediaInfo.fps = fps;\r\n                }\r\n            }\r\n            if (typeof onMetaData.keyframes === 'object') {  // keyframes\r\n                this._mediaInfo.hasKeyframesIndex = true;\r\n                let keyframes = onMetaData.keyframes;\r\n                this._mediaInfo.keyframesIndex = this._parseKeyframesIndex(keyframes);\r\n                onMetaData.keyframes = null;  // keyframes has been extracted, remove it\r\n            } else {\r\n                this._mediaInfo.hasKeyframesIndex = false;\r\n            }\r\n            this._dispatch = false;\r\n            this._mediaInfo.metadata = onMetaData;\r\n            Log.v(this.TAG, 'Parsed onMetaData');\r\n            if (this._mediaInfo.isComplete()) {\r\n                this._onMediaInfo(this._mediaInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    _parseKeyframesIndex(keyframes) {\r\n        let times = [];\r\n        let filepositions = [];\r\n\r\n        // ignore first keyframe which is actually AVC Sequence Header (AVCDecoderConfigurationRecord)\r\n        for (let i = 1; i < keyframes.times.length; i++) {\r\n            let time = this._timestampBase + Math.floor(keyframes.times[i] * 1000);\r\n            times.push(time);\r\n            filepositions.push(keyframes.filepositions[i]);\r\n        }\r\n\r\n        return {\r\n            times: times,\r\n            filepositions: filepositions\r\n        };\r\n    }\r\n\r\n    _parseAudioData(arrayBuffer, dataOffset, dataSize, tagTimestamp) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid audio packet, missing SoundData payload!');\r\n            return;\r\n        }\r\n\r\n        if (this._hasAudioFlagOverrided === true && this._hasAudio === false) {\r\n            // If hasAudio: false indicated explicitly in MediaDataSource,\r\n            // Ignore all the audio packets\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let soundSpec = v.getUint8(0);\r\n\r\n        let soundFormat = soundSpec >>> 4;\r\n        if (soundFormat !== 2 && soundFormat !== 10) {  // MP3 or AAC\r\n            this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported audio codec idx: ' + soundFormat);\r\n            return;\r\n        }\r\n\r\n        let soundRate = 0;\r\n        let soundRateIndex = (soundSpec & 12) >>> 2;\r\n        if (soundRateIndex >= 0 && soundRateIndex <= 4) {\r\n            soundRate = this._flvSoundRateTable[soundRateIndex];\r\n        } else {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid audio sample rate idx: ' + soundRateIndex);\r\n            return;\r\n        }\r\n\r\n        let soundSize = (soundSpec & 2) >>> 1;  // unused\r\n        let soundType = (soundSpec & 1);\r\n\r\n\r\n        let meta = this._audioMetadata;\r\n        let track = this._audioTrack;\r\n\r\n        if (!meta) {\r\n            if (this._hasAudio === false && this._hasAudioFlagOverrided === false) {\r\n                this._hasAudio = true;\r\n                this._mediaInfo.hasAudio = true;\r\n            }\r\n\r\n            // initial metadata\r\n            meta = this._audioMetadata = {};\r\n            meta.type = 'audio';\r\n            meta.id = track.id;\r\n            meta.timescale = this._timescale;\r\n            meta.duration = this._duration;\r\n            meta.audioSampleRate = soundRate;\r\n            meta.channelCount = (soundType === 0 ? 1 : 2);\r\n        }\r\n\r\n        if (soundFormat === 10) {  // AAC\r\n            let aacData = this._parseAACAudioData(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n            if (aacData == undefined) {\r\n                return;\r\n            }\r\n\r\n            if (aacData.packetType === 0) {  // AAC sequence header (AudioSpecificConfig)\r\n                if (meta.config) {\r\n                    Log.w(this.TAG, 'Found another AudioSpecificConfig!');\r\n                }\r\n                let misc = aacData.data;\r\n                meta.audioSampleRate = misc.samplingRate;\r\n                meta.channelCount = misc.channelCount;\r\n                meta.codec = misc.codec;\r\n                meta.originalCodec = misc.originalCodec;\r\n                meta.config = misc.config;\r\n                // added by qli5\r\n                meta.configRaw = misc.configRaw;\r\n                // The decode result of an aac sample is 1024 PCM samples\r\n                meta.refSampleDuration = 1024 / meta.audioSampleRate * meta.timescale;\r\n                Log.v(this.TAG, 'Parsed AudioSpecificConfig');\r\n\r\n                if (this._isInitialMetadataDispatched()) {\r\n                    // Non-initial metadata, force dispatch (or flush) parsed frames to remuxer\r\n                    if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                        this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n                    }\r\n                } else {\r\n                    this._audioInitialMetadataDispatched = true;\r\n                }\r\n                // then notify new metadata\r\n                this._dispatch = false;\r\n                this._onTrackMetadata('audio', meta);\r\n\r\n                let mi = this._mediaInfo;\r\n                mi.audioCodec = meta.originalCodec;\r\n                mi.audioSampleRate = meta.audioSampleRate;\r\n                mi.audioChannelCount = meta.channelCount;\r\n                if (mi.hasVideo) {\r\n                    if (mi.videoCodec != null) {\r\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                    }\r\n                } else {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\r\n                }\r\n                if (mi.isComplete()) {\r\n                    this._onMediaInfo(mi);\r\n                }\r\n            } else if (aacData.packetType === 1) {  // AAC raw frame data\r\n                let dts = this._timestampBase + tagTimestamp;\r\n                let aacSample = { unit: aacData.data, length: aacData.data.byteLength, dts: dts, pts: dts };\r\n                track.samples.push(aacSample);\r\n                track.length += aacData.data.length;\r\n            } else {\r\n                Log.e(this.TAG, `Flv: Unsupported AAC data type ${aacData.packetType}`);\r\n            }\r\n        } else if (soundFormat === 2) {  // MP3\r\n            if (!meta.codec) {\r\n                // We need metadata for mp3 audio track, extract info from frame header\r\n                let misc = this._parseMP3AudioData(arrayBuffer, dataOffset + 1, dataSize - 1, true);\r\n                if (misc == undefined) {\r\n                    return;\r\n                }\r\n                meta.audioSampleRate = misc.samplingRate;\r\n                meta.channelCount = misc.channelCount;\r\n                meta.codec = misc.codec;\r\n                meta.originalCodec = misc.originalCodec;\r\n                // The decode result of an mp3 sample is 1152 PCM samples\r\n                meta.refSampleDuration = 1152 / meta.audioSampleRate * meta.timescale;\r\n                Log.v(this.TAG, 'Parsed MPEG Audio Frame Header');\r\n\r\n                this._audioInitialMetadataDispatched = true;\r\n                this._onTrackMetadata('audio', meta);\r\n\r\n                let mi = this._mediaInfo;\r\n                mi.audioCodec = meta.codec;\r\n                mi.audioSampleRate = meta.audioSampleRate;\r\n                mi.audioChannelCount = meta.channelCount;\r\n                mi.audioDataRate = misc.bitRate;\r\n                if (mi.hasVideo) {\r\n                    if (mi.videoCodec != null) {\r\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                    }\r\n                } else {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\r\n                }\r\n                if (mi.isComplete()) {\r\n                    this._onMediaInfo(mi);\r\n                }\r\n            }\r\n\r\n            // This packet is always a valid audio packet, extract it\r\n            let data = this._parseMP3AudioData(arrayBuffer, dataOffset + 1, dataSize - 1, false);\r\n            if (data == undefined) {\r\n                return;\r\n            }\r\n            let dts = this._timestampBase + tagTimestamp;\r\n            let mp3Sample = { unit: data, length: data.byteLength, dts: dts, pts: dts };\r\n            track.samples.push(mp3Sample);\r\n            track.length += data.length;\r\n        }\r\n    }\r\n\r\n    _parseAACAudioData(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid AAC packet, missing AACPacketType or/and Data!');\r\n            return;\r\n        }\r\n\r\n        let result = {};\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n\r\n        result.packetType = array[0];\r\n\r\n        if (array[0] === 0) {\r\n            result.data = this._parseAACAudioSpecificConfig(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n        } else {\r\n            result.data = array.subarray(1);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    _parseAACAudioSpecificConfig(arrayBuffer, dataOffset, dataSize) {\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n        let config = null;\r\n\r\n        /* Audio Object Type:\r\n           0: Null\r\n           1: AAC Main\r\n           2: AAC LC\r\n           3: AAC SSR (Scalable Sample Rate)\r\n           4: AAC LTP (Long Term Prediction)\r\n           5: HE-AAC / SBR (Spectral Band Replication)\r\n           6: AAC Scalable\r\n        */\r\n\r\n        let audioObjectType = 0;\r\n        let originalAudioObjectType = 0;\r\n        let audioExtensionObjectType = null;\r\n        let samplingIndex = 0;\r\n        let extensionSamplingIndex = null;\r\n\r\n        // 5 bits\r\n        audioObjectType = originalAudioObjectType = array[0] >>> 3;\r\n        // 4 bits\r\n        samplingIndex = ((array[0] & 0x07) << 1) | (array[1] >>> 7);\r\n        if (samplingIndex < 0 || samplingIndex >= this._mpegSamplingRates.length) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid sampling frequency index!');\r\n            return;\r\n        }\r\n\r\n        let samplingFrequence = this._mpegSamplingRates[samplingIndex];\r\n\r\n        // 4 bits\r\n        let channelConfig = (array[1] & 0x78) >>> 3;\r\n        if (channelConfig < 0 || channelConfig >= 8) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid channel configuration');\r\n            return;\r\n        }\r\n\r\n        if (audioObjectType === 5) {  // HE-AAC?\r\n            // 4 bits\r\n            extensionSamplingIndex = ((array[1] & 0x07) << 1) | (array[2] >>> 7);\r\n            // 5 bits\r\n            audioExtensionObjectType = (array[2] & 0x7C) >>> 2;\r\n        }\r\n\r\n        // workarounds for various browsers\r\n        let userAgent = navigator.userAgent.toLowerCase();\r\n\r\n        if (userAgent.indexOf('firefox') !== -1) {\r\n            // firefox: use SBR (HE-AAC) if freq less than 24kHz\r\n            if (samplingIndex >= 6) {\r\n                audioObjectType = 5;\r\n                config = new Array(4);\r\n                extensionSamplingIndex = samplingIndex - 3;\r\n            } else {  // use LC-AAC\r\n                audioObjectType = 2;\r\n                config = new Array(2);\r\n                extensionSamplingIndex = samplingIndex;\r\n            }\r\n        } else if (userAgent.indexOf('android') !== -1) {\r\n            // android: always use LC-AAC\r\n            audioObjectType = 2;\r\n            config = new Array(2);\r\n            extensionSamplingIndex = samplingIndex;\r\n        } else {\r\n            // for other browsers, e.g. chrome...\r\n            // Always use HE-AAC to make it easier to switch aac codec profile\r\n            audioObjectType = 5;\r\n            extensionSamplingIndex = samplingIndex;\r\n            config = new Array(4);\r\n\r\n            if (samplingIndex >= 6) {\r\n                extensionSamplingIndex = samplingIndex - 3;\r\n            } else if (channelConfig === 1) {  // Mono channel\r\n                audioObjectType = 2;\r\n                config = new Array(2);\r\n                extensionSamplingIndex = samplingIndex;\r\n            }\r\n        }\r\n\r\n        config[0] = audioObjectType << 3;\r\n        config[0] |= (samplingIndex & 0x0F) >>> 1;\r\n        config[1] = (samplingIndex & 0x0F) << 7;\r\n        config[1] |= (channelConfig & 0x0F) << 3;\r\n        if (audioObjectType === 5) {\r\n            config[1] |= ((extensionSamplingIndex & 0x0F) >>> 1);\r\n            config[2] = (extensionSamplingIndex & 0x01) << 7;\r\n            // extended audio object type: force to 2 (LC-AAC)\r\n            config[2] |= (2 << 2);\r\n            config[3] = 0;\r\n        }\r\n\r\n        return {\r\n            // configRaw: added by qli5\r\n            configRaw: array,\r\n            config: config,\r\n            samplingRate: samplingFrequence,\r\n            channelCount: channelConfig,\r\n            codec: 'mp4a.40.' + audioObjectType,\r\n            originalCodec: 'mp4a.40.' + originalAudioObjectType\r\n        };\r\n    }\r\n\r\n    _parseMP3AudioData(arrayBuffer, dataOffset, dataSize, requestHeader) {\r\n        if (dataSize < 4) {\r\n            Log.w(this.TAG, 'Flv: Invalid MP3 packet, header missing!');\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n        let result = null;\r\n\r\n        if (requestHeader) {\r\n            if (array[0] !== 0xFF) {\r\n                return;\r\n            }\r\n            let ver = (array[1] >>> 3) & 0x03;\r\n            let layer = (array[1] & 0x06) >> 1;\r\n\r\n            let bitrate_index = (array[2] & 0xF0) >>> 4;\r\n            let sampling_freq_index = (array[2] & 0x0C) >>> 2;\r\n\r\n            let channel_mode = (array[3] >>> 6) & 0x03;\r\n            let channel_count = channel_mode !== 3 ? 2 : 1;\r\n\r\n            let sample_rate = 0;\r\n            let bit_rate = 0;\r\n            let object_type = 34;  // Layer-3, listed in MPEG-4 Audio Object Types\r\n\r\n            let codec = 'mp3';\r\n\r\n            switch (ver) {\r\n                case 0:  // MPEG 2.5\r\n                    sample_rate = this._mpegAudioV25SampleRateTable[sampling_freq_index];\r\n                    break;\r\n                case 2:  // MPEG 2\r\n                    sample_rate = this._mpegAudioV20SampleRateTable[sampling_freq_index];\r\n                    break;\r\n                case 3:  // MPEG 1\r\n                    sample_rate = this._mpegAudioV10SampleRateTable[sampling_freq_index];\r\n                    break;\r\n            }\r\n\r\n            switch (layer) {\r\n                case 1:  // Layer 3\r\n                    object_type = 34;\r\n                    if (bitrate_index < this._mpegAudioL3BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL3BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n                case 2:  // Layer 2\r\n                    object_type = 33;\r\n                    if (bitrate_index < this._mpegAudioL2BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL2BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n                case 3:  // Layer 1\r\n                    object_type = 32;\r\n                    if (bitrate_index < this._mpegAudioL1BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL1BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            result = {\r\n                bitRate: bit_rate,\r\n                samplingRate: sample_rate,\r\n                channelCount: channel_count,\r\n                codec: codec,\r\n                originalCodec: codec\r\n            };\r\n        } else {\r\n            result = array;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    _parseVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid video packet, missing VideoData payload!');\r\n            return;\r\n        }\r\n\r\n        if (this._hasVideoFlagOverrided === true && this._hasVideo === false) {\r\n            // If hasVideo: false indicated explicitly in MediaDataSource,\r\n            // Ignore all the video packets\r\n            return;\r\n        }\r\n\r\n        let spec = (new Uint8Array(arrayBuffer, dataOffset, dataSize))[0];\r\n\r\n        let frameType = (spec & 240) >>> 4;\r\n        let codecId = spec & 15;\r\n\r\n        if (codecId !== 7) {\r\n            this._onError(DemuxErrors.CODEC_UNSUPPORTED, `Flv: Unsupported codec in video frame: ${codecId}`);\r\n            return;\r\n        }\r\n\r\n        this._parseAVCVideoPacket(arrayBuffer, dataOffset + 1, dataSize - 1, tagTimestamp, tagPosition, frameType);\r\n    }\r\n\r\n    _parseAVCVideoPacket(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType) {\r\n        if (dataSize < 4) {\r\n            Log.w(this.TAG, 'Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime');\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let packetType = v.getUint8(0);\r\n        let cts = v.getUint32(0, !le) & 0x00FFFFFF;\r\n\r\n        if (packetType === 0) {  // AVCDecoderConfigurationRecord\r\n            this._parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset + 4, dataSize - 4);\r\n        } else if (packetType === 1) {  // One or more Nalus\r\n            this._parseAVCVideoData(arrayBuffer, dataOffset + 4, dataSize - 4, tagTimestamp, tagPosition, frameType, cts);\r\n        } else if (packetType === 2) {\r\n            // empty, AVC end of sequence\r\n        } else {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Invalid video packet type ${packetType}`);\r\n            return;\r\n        }\r\n    }\r\n\r\n    _parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 7) {\r\n            Log.w(this.TAG, 'Flv: Invalid AVCDecoderConfigurationRecord, lack of data!');\r\n            return;\r\n        }\r\n\r\n        let meta = this._videoMetadata;\r\n        let track = this._videoTrack;\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        if (!meta) {\r\n            if (this._hasVideo === false && this._hasVideoFlagOverrided === false) {\r\n                this._hasVideo = true;\r\n                this._mediaInfo.hasVideo = true;\r\n            }\r\n\r\n            meta = this._videoMetadata = {};\r\n            meta.type = 'video';\r\n            meta.id = track.id;\r\n            meta.timescale = this._timescale;\r\n            meta.duration = this._duration;\r\n        } else {\r\n            if (typeof meta.avcc !== 'undefined') {\r\n                Log.w(this.TAG, 'Found another AVCDecoderConfigurationRecord!');\r\n            }\r\n        }\r\n\r\n        let version = v.getUint8(0);  // configurationVersion\r\n        let avcProfile = v.getUint8(1);  // avcProfileIndication\r\n        let profileCompatibility = v.getUint8(2);  // profile_compatibility\r\n        let avcLevel = v.getUint8(3);  // AVCLevelIndication\r\n\r\n        if (version !== 1 || avcProfile === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord');\r\n            return;\r\n        }\r\n\r\n        this._naluLengthSize = (v.getUint8(4) & 3) + 1;  // lengthSizeMinusOne\r\n        if (this._naluLengthSize !== 3 && this._naluLengthSize !== 4) {  // holy shit!!!\r\n            this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Strange NaluLengthSizeMinusOne: ${this._naluLengthSize - 1}`);\r\n            return;\r\n        }\r\n\r\n        let spsCount = v.getUint8(5) & 31;  // numOfSequenceParameterSets\r\n        if (spsCount === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No SPS');\r\n            return;\r\n        } else if (spsCount > 1) {\r\n            Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ${spsCount}`);\r\n        }\r\n\r\n        let offset = 6;\r\n\r\n        for (let i = 0; i < spsCount; i++) {\r\n            let len = v.getUint16(offset, !le);  // sequenceParameterSetLength\r\n            offset += 2;\r\n\r\n            if (len === 0) {\r\n                continue;\r\n            }\r\n\r\n            // Notice: Nalu without startcode header (00 00 00 01)\r\n            let sps = new Uint8Array(arrayBuffer, dataOffset + offset, len);\r\n            offset += len;\r\n\r\n            let config = SPSParser.parseSPS(sps);\r\n            if (i !== 0) {\r\n                // ignore other sps's config\r\n                continue;\r\n            }\r\n\r\n            meta.codecWidth = config.codec_size.width;\r\n            meta.codecHeight = config.codec_size.height;\r\n            meta.presentWidth = config.present_size.width;\r\n            meta.presentHeight = config.present_size.height;\r\n\r\n            meta.profile = config.profile_string;\r\n            meta.level = config.level_string;\r\n            meta.bitDepth = config.bit_depth;\r\n            meta.chromaFormat = config.chroma_format;\r\n            meta.sarRatio = config.sar_ratio;\r\n            meta.frameRate = config.frame_rate;\r\n\r\n            if (config.frame_rate.fixed === false ||\r\n                config.frame_rate.fps_num === 0 ||\r\n                config.frame_rate.fps_den === 0) {\r\n                meta.frameRate = this._referenceFrameRate;\r\n            }\r\n\r\n            let fps_den = meta.frameRate.fps_den;\r\n            let fps_num = meta.frameRate.fps_num;\r\n            meta.refSampleDuration = meta.timescale * (fps_den / fps_num);\r\n\r\n            let codecArray = sps.subarray(1, 4);\r\n            let codecString = 'avc1.';\r\n            for (let j = 0; j < 3; j++) {\r\n                let h = codecArray[j].toString(16);\r\n                if (h.length < 2) {\r\n                    h = '0' + h;\r\n                }\r\n                codecString += h;\r\n            }\r\n            meta.codec = codecString;\r\n\r\n            let mi = this._mediaInfo;\r\n            mi.width = meta.codecWidth;\r\n            mi.height = meta.codecHeight;\r\n            mi.fps = meta.frameRate.fps;\r\n            mi.profile = meta.profile;\r\n            mi.level = meta.level;\r\n            mi.chromaFormat = config.chroma_format_string;\r\n            mi.sarNum = meta.sarRatio.width;\r\n            mi.sarDen = meta.sarRatio.height;\r\n            mi.videoCodec = codecString;\r\n\r\n            if (mi.hasAudio) {\r\n                if (mi.audioCodec != null) {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                }\r\n            } else {\r\n                mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + '\"';\r\n            }\r\n            if (mi.isComplete()) {\r\n                this._onMediaInfo(mi);\r\n            }\r\n        }\r\n\r\n        let ppsCount = v.getUint8(offset);  // numOfPictureParameterSets\r\n        if (ppsCount === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No PPS');\r\n            return;\r\n        } else if (ppsCount > 1) {\r\n            Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ${ppsCount}`);\r\n        }\r\n\r\n        offset++;\r\n\r\n        for (let i = 0; i < ppsCount; i++) {\r\n            let len = v.getUint16(offset, !le);  // pictureParameterSetLength\r\n            offset += 2;\r\n\r\n            if (len === 0) {\r\n                continue;\r\n            }\r\n\r\n            // pps is useless for extracting video information\r\n            offset += len;\r\n        }\r\n\r\n        meta.avcc = new Uint8Array(dataSize);\r\n        meta.avcc.set(new Uint8Array(arrayBuffer, dataOffset, dataSize), 0);\r\n        Log.v(this.TAG, 'Parsed AVCDecoderConfigurationRecord');\r\n\r\n        if (this._isInitialMetadataDispatched()) {\r\n            // flush parsed frames\r\n            if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n            }\r\n        } else {\r\n            this._videoInitialMetadataDispatched = true;\r\n        }\r\n        // notify new metadata\r\n        this._dispatch = false;\r\n        this._onTrackMetadata('video', meta);\r\n    }\r\n\r\n    _parseAVCVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType, cts) {\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let units = [], length = 0;\r\n\r\n        let offset = 0;\r\n        const lengthSize = this._naluLengthSize;\r\n        let dts = this._timestampBase + tagTimestamp;\r\n        let keyframe = (frameType === 1);  // from FLV Frame Type constants\r\n        let refIdc = 1; // added by qli5\r\n\r\n        while (offset < dataSize) {\r\n            if (offset + 4 >= dataSize) {\r\n                Log.w(this.TAG, `Malformed Nalu near timestamp ${dts}, offset = ${offset}, dataSize = ${dataSize}`);\r\n                break;  // data not enough for next Nalu\r\n            }\r\n            // Nalu with length-header (AVC1)\r\n            let naluSize = v.getUint32(offset, !le);  // Big-Endian read\r\n            if (lengthSize === 3) {\r\n                naluSize >>>= 8;\r\n            }\r\n            if (naluSize > dataSize - lengthSize) {\r\n                Log.w(this.TAG, `Malformed Nalus near timestamp ${dts}, NaluSize > DataSize!`);\r\n                return;\r\n            }\r\n\r\n            let unitType = v.getUint8(offset + lengthSize) & 0x1F;\r\n            // added by qli5\r\n            refIdc = v.getUint8(offset + lengthSize) & 0x60;\r\n\r\n            if (unitType === 5) {  // IDR\r\n                keyframe = true;\r\n            }\r\n\r\n            let data = new Uint8Array(arrayBuffer, dataOffset + offset, lengthSize + naluSize);\r\n            let unit = { type: unitType, data: data };\r\n            units.push(unit);\r\n            length += data.byteLength;\r\n\r\n            offset += lengthSize + naluSize;\r\n        }\r\n\r\n        if (units.length) {\r\n            let track = this._videoTrack;\r\n            let avcSample = {\r\n                units: units,\r\n                length: length,\r\n                isKeyframe: keyframe,\r\n                refIdc: refIdc,\r\n                dts: dts,\r\n                cts: cts,\r\n                pts: (dts + cts)\r\n            };\r\n            if (keyframe) {\r\n                avcSample.fileposition = tagPosition;\r\n            }\r\n            track.samples.push(avcSample);\r\n            track.length += length;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport { FLVDemuxer };\r\nexport default FLVDemuxer;\r\n","/***\r\n * Copyright (C) 2018 Qli5. All Rights Reserved.\r\n * \r\n * @author qli5 <goodlq11[at](163|gmail).com>\r\n * \r\n * This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n*/\r\n\r\nimport { TextDecoder } from '../util/shim';\r\n\r\nclass ASS {\r\n    /**\r\n     * Extract sections from ass string\r\n     * @param {string} str \r\n     * @returns {Object} - object from sections\r\n     */\r\n    static extractSections(str) {\r\n        const regex = /^\\ufeff?\\[(.*)\\]$/mg;\r\n        let match;\r\n        let matchArr = [];\r\n        while ((match = regex.exec(str)) !== null) {\r\n            matchArr.push({ name: match[1], index: match.index });\r\n        }\r\n        let ret = {};\r\n        matchArr.forEach((match, i) => ret[match.name] = str.slice(match.index, matchArr[i + 1] && matchArr[i + 1].index));\r\n        return ret;\r\n    }\r\n\r\n    /**\r\n     * Extract subtitle lines from section Events\r\n     * @param {string} str \r\n     * @returns {Array<Object>} - array of subtitle lines\r\n     */\r\n    static extractSubtitleLines(str) {\r\n        const lines = str.split('\\n');\r\n        if (lines[0] != '[Events]' && lines[0] != '[events]') throw new Error('ASSDemuxer: section is not [Events]');\r\n        if (lines[1].indexOf('Format:') != 0 && lines[1].indexOf('format:') != 0) throw new Error('ASSDemuxer: cannot find Format definition in section [Events]');\r\n\r\n        const format = lines[1].slice(lines[1].indexOf(':') + 1).split(',').map(e => e.trim());\r\n        return lines.slice(2).map(e => {\r\n            let j = {};\r\n            e.replace(/[d|D]ialogue:\\s*/, '')\r\n                .match(new RegExp(new Array(format.length - 1).fill('(.*?),').join('') + '(.*)'))\r\n                .slice(1)\r\n                .forEach((k, index) => j[format[index]] = k)\r\n            return j;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create a new ASS Demuxer\r\n     */\r\n    constructor() {\r\n        this.info = '';\r\n        this.styles = '';\r\n        this.events = '';\r\n        this.eventsHeader = '';\r\n        this.pictures = '';\r\n        this.fonts = '';\r\n        this.lines = '';\r\n    }\r\n\r\n    get header() {\r\n        // return this.info + this.styles + this.eventsHeader;\r\n        return this.info + this.styles;\r\n    }\r\n\r\n    /**\r\n     * Load a file from an arraybuffer of a string\r\n     * @param {(ArrayBuffer|string)} chunk \r\n     */\r\n    parseFile(chunk) {\r\n        const str = typeof chunk == 'string' ? chunk : new TextDecoder('utf-8').decode(chunk);\r\n        for (let [i, j] of Object.entries(ASS.extractSections(str))) {\r\n            if (i.match(/Script Info(?:mation)?/i)) this.info = j;\r\n            else if (i.match(/V4\\+? Styles?/i)) this.styles = j;\r\n            else if (i.match(/Events?/i)) this.events = j;\r\n            else if (i.match(/Pictures?/i)) this.pictures = j;\r\n            else if (i.match(/Fonts?/i)) this.fonts = j;\r\n        }\r\n        this.eventsHeader = this.events.split('\\n', 2).join('\\n') + '\\n';\r\n        this.lines = ASS.extractSubtitleLines(this.events);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport { ASS };\r\nexport default ASS;\r\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from \"lodash-es/memoize\";\r\nexport const numberToByteArray = (num, byteLength = getNumberByteLength(num)) => {\r\n    var byteArray;\r\n    if (byteLength == 1) {\r\n        byteArray = new DataView(new ArrayBuffer(1));\r\n        byteArray.setUint8(0, num);\r\n    }\r\n    else if (byteLength == 2) {\r\n        byteArray = new DataView(new ArrayBuffer(2));\r\n        byteArray.setUint16(0, num);\r\n    }\r\n    else if (byteLength == 3) {\r\n        byteArray = new DataView(new ArrayBuffer(3));\r\n        byteArray.setUint8(0, num >> 16);\r\n        byteArray.setUint16(1, num & 0xffff);\r\n    }\r\n    else if (byteLength == 4) {\r\n        byteArray = new DataView(new ArrayBuffer(4));\r\n        byteArray.setUint32(0, num);\r\n    }\r\n    else if (num < 0xffffffff) {\r\n        byteArray = new DataView(new ArrayBuffer(5));\r\n        byteArray.setUint32(1, num);\r\n    }\r\n    else if (byteLength == 5) {\r\n        byteArray = new DataView(new ArrayBuffer(5));\r\n        byteArray.setUint8(0, num / 0x100000000 | 0);\r\n        byteArray.setUint32(1, num % 0x100000000);\r\n    }\r\n    else if (byteLength == 6) {\r\n        byteArray = new DataView(new ArrayBuffer(6));\r\n        byteArray.setUint16(0, num / 0x100000000 | 0);\r\n        byteArray.setUint32(2, num % 0x100000000);\r\n    }\r\n    else if (byteLength == 7) {\r\n        byteArray = new DataView(new ArrayBuffer(7));\r\n        byteArray.setUint8(0, num / 0x1000000000000 | 0);\r\n        byteArray.setUint16(1, num / 0x100000000 & 0xffff);\r\n        byteArray.setUint32(3, num % 0x100000000);\r\n    }\r\n    else if (byteLength == 8) {\r\n        byteArray = new DataView(new ArrayBuffer(8));\r\n        byteArray.setUint32(0, num / 0x100000000 | 0);\r\n        byteArray.setUint32(4, num % 0x100000000);\r\n    }\r\n    else {\r\n        throw new Error(\"EBML.typedArrayUtils.numberToByteArray: byte length must be less than or equal to 8\");\r\n    }\r\n    return new Uint8Array(byteArray.buffer);\r\n};\r\nexport const stringToByteArray = memoize((str) => {\r\n    return Uint8Array.from(Array.from(str).map(_ => _.codePointAt(0)));\r\n});\r\nexport function getNumberByteLength(num) {\r\n    if (num < 0) {\r\n        throw new Error(\"EBML.typedArrayUtils.getNumberByteLength: negative number not implemented\");\r\n    }\r\n    else if (num < 0x100) {\r\n        return 1;\r\n    }\r\n    else if (num < 0x10000) {\r\n        return 2;\r\n    }\r\n    else if (num < 0x1000000) {\r\n        return 3;\r\n    }\r\n    else if (num < 0x100000000) {\r\n        return 4;\r\n    }\r\n    else if (num < 0x10000000000) {\r\n        return 5;\r\n    }\r\n    else if (num < 0x1000000000000) {\r\n        return 6;\r\n    }\r\n    else if (num < 0x20000000000000) {\r\n        return 7;\r\n    }\r\n    else {\r\n        throw new Error(\"EBML.typedArrayUtils.getNumberByteLength: number exceeds Number.MAX_SAFE_INTEGER\");\r\n    }\r\n}\r\nexport const int16Bit = memoize((num) => {\r\n    const ab = new ArrayBuffer(2);\r\n    new DataView(ab).setInt16(0, num);\r\n    return new Uint8Array(ab);\r\n});\r\nexport const float32bit = memoize((num) => {\r\n    const ab = new ArrayBuffer(4);\r\n    new DataView(ab).setFloat32(0, num);\r\n    return new Uint8Array(ab);\r\n});\r\nexport const dumpBytes = (b) => {\r\n    return Array.from(new Uint8Array(b)).map(_ => `0x${_.toString(16)}`).join(\", \");\r\n};\r\n","import memoize from \"lodash-es/memoize\";\r\nimport { numberToByteArray, stringToByteArray, int16Bit, float32bit } from \"./typedArrayUtils\";\r\nexport class Value {\r\n    constructor(bytes) {\r\n        this.bytes = bytes;\r\n    }\r\n    write(buf, pos) {\r\n        buf.set(this.bytes, pos);\r\n        return pos + this.bytes.length;\r\n    }\r\n    countSize() {\r\n        return this.bytes.length;\r\n    }\r\n}\r\nexport class Element {\r\n    constructor(id, children, isSizeUnknown) {\r\n        this.id = id;\r\n        this.children = children;\r\n        const bodySize = this.children.reduce((p, c) => p + c.countSize(), 0);\r\n        this.sizeMetaData = isSizeUnknown ?\r\n            UNKNOWN_SIZE :\r\n            vintEncode(numberToByteArray(bodySize, getEBMLByteLength(bodySize)));\r\n        this.size = this.id.length + this.sizeMetaData.length + bodySize;\r\n    }\r\n    write(buf, pos) {\r\n        buf.set(this.id, pos);\r\n        buf.set(this.sizeMetaData, pos + this.id.length);\r\n        return this.children.reduce((p, c) => c.write(buf, p), pos + this.id.length + this.sizeMetaData.length);\r\n    }\r\n    countSize() {\r\n        return this.size;\r\n    }\r\n}\r\nexport const bytes = memoize((data) => {\r\n    return new Value(data);\r\n});\r\nexport const number = memoize((num) => {\r\n    return bytes(numberToByteArray(num));\r\n});\r\nexport const vintEncodedNumber = memoize((num) => {\r\n    return bytes(vintEncode(numberToByteArray(num, getEBMLByteLength(num))));\r\n});\r\nexport const int16 = memoize((num) => {\r\n    return bytes(int16Bit(num));\r\n});\r\nexport const float = memoize((num) => {\r\n    return bytes(float32bit(num));\r\n});\r\nexport const string = memoize((str) => {\r\n    return bytes(stringToByteArray(str));\r\n});\r\nexport const element = (id, child) => {\r\n    return new Element(id, Array.isArray(child) ? child : [child], false);\r\n};\r\nexport const unknownSizeElement = (id, child) => {\r\n    return new Element(id, Array.isArray(child) ? child : [child], true);\r\n};\r\nexport const build = (v) => {\r\n    const b = new Uint8Array(v.countSize());\r\n    v.write(b, 0);\r\n    return b;\r\n};\r\nexport const getEBMLByteLength = (num) => {\r\n    if (num < 0x7f) {\r\n        return 1;\r\n    }\r\n    else if (num < 0x3fff) {\r\n        return 2;\r\n    }\r\n    else if (num < 0x1fffff) {\r\n        return 3;\r\n    }\r\n    else if (num < 0xfffffff) {\r\n        return 4;\r\n    }\r\n    else if (num < 0x7ffffffff) {\r\n        return 5;\r\n    }\r\n    else if (num < 0x3ffffffffff) {\r\n        return 6;\r\n    }\r\n    else if (num < 0x1ffffffffffff) {\r\n        return 7;\r\n    }\r\n    else if (num < 0x20000000000000) {\r\n        return 8;\r\n    }\r\n    else if (num < 0xffffffffffffff) {\r\n        throw new Error(\"EBMLgetEBMLByteLength: number exceeds Number.MAX_SAFE_INTEGER\");\r\n    }\r\n    else {\r\n        throw new Error(\"EBMLgetEBMLByteLength: data size must be less than or equal to \" + (Math.pow(2, 56) - 2));\r\n    }\r\n};\r\nexport const UNKNOWN_SIZE = new Uint8Array([0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF]);\r\nexport const vintEncode = (byteArray) => {\r\n    byteArray[0] = getSizeMask(byteArray.length) | byteArray[0];\r\n    return byteArray;\r\n};\r\nexport const getSizeMask = (byteLength) => {\r\n    return 0x80 >> (byteLength - 1);\r\n};\r\n","/**\r\n * @see https://www.matroska.org/technical/specs/index.html\r\n */\r\nexport const ID = {\r\n    EBML: Uint8Array.of(0x1A, 0x45, 0xDF, 0xA3),\r\n    EBMLVersion: Uint8Array.of(0x42, 0x86),\r\n    EBMLReadVersion: Uint8Array.of(0x42, 0xF7),\r\n    EBMLMaxIDLength: Uint8Array.of(0x42, 0xF2),\r\n    EBMLMaxSizeLength: Uint8Array.of(0x42, 0xF3),\r\n    DocType: Uint8Array.of(0x42, 0x82),\r\n    DocTypeVersion: Uint8Array.of(0x42, 0x87),\r\n    DocTypeReadVersion: Uint8Array.of(0x42, 0x85),\r\n    Void: Uint8Array.of(0xEC),\r\n    CRC32: Uint8Array.of(0xBF),\r\n    Segment: Uint8Array.of(0x18, 0x53, 0x80, 0x67),\r\n    SeekHead: Uint8Array.of(0x11, 0x4D, 0x9B, 0x74),\r\n    Seek: Uint8Array.of(0x4D, 0xBB),\r\n    SeekID: Uint8Array.of(0x53, 0xAB),\r\n    SeekPosition: Uint8Array.of(0x53, 0xAC),\r\n    Info: Uint8Array.of(0x15, 0x49, 0xA9, 0x66),\r\n    SegmentUID: Uint8Array.of(0x73, 0xA4),\r\n    SegmentFilename: Uint8Array.of(0x73, 0x84),\r\n    PrevUID: Uint8Array.of(0x3C, 0xB9, 0x23),\r\n    PrevFilename: Uint8Array.of(0x3C, 0x83, 0xAB),\r\n    NextUID: Uint8Array.of(0x3E, 0xB9, 0x23),\r\n    NextFilename: Uint8Array.of(0x3E, 0x83, 0xBB),\r\n    SegmentFamily: Uint8Array.of(0x44, 0x44),\r\n    ChapterTranslate: Uint8Array.of(0x69, 0x24),\r\n    ChapterTranslateEditionUID: Uint8Array.of(0x69, 0xFC),\r\n    ChapterTranslateCodec: Uint8Array.of(0x69, 0xBF),\r\n    ChapterTranslateID: Uint8Array.of(0x69, 0xA5),\r\n    TimecodeScale: Uint8Array.of(0x2A, 0xD7, 0xB1),\r\n    Duration: Uint8Array.of(0x44, 0x89),\r\n    DateUTC: Uint8Array.of(0x44, 0x61),\r\n    Title: Uint8Array.of(0x7B, 0xA9),\r\n    MuxingApp: Uint8Array.of(0x4D, 0x80),\r\n    WritingApp: Uint8Array.of(0x57, 0x41),\r\n    Cluster: Uint8Array.of(0x1F, 0x43, 0xB6, 0x75),\r\n    Timecode: Uint8Array.of(0xE7),\r\n    SilentTracks: Uint8Array.of(0x58, 0x54),\r\n    SilentTrackNumber: Uint8Array.of(0x58, 0xD7),\r\n    Position: Uint8Array.of(0xA7),\r\n    PrevSize: Uint8Array.of(0xAB),\r\n    SimpleBlock: Uint8Array.of(0xA3),\r\n    BlockGroup: Uint8Array.of(0xA0),\r\n    Block: Uint8Array.of(0xA1),\r\n    BlockAdditions: Uint8Array.of(0x75, 0xA1),\r\n    BlockMore: Uint8Array.of(0xA6),\r\n    BlockAddID: Uint8Array.of(0xEE),\r\n    BlockAdditional: Uint8Array.of(0xA5),\r\n    BlockDuration: Uint8Array.of(0x9B),\r\n    ReferencePriority: Uint8Array.of(0xFA),\r\n    ReferenceBlock: Uint8Array.of(0xFB),\r\n    CodecState: Uint8Array.of(0xA4),\r\n    DiscardPadding: Uint8Array.of(0x75, 0xA2),\r\n    Slices: Uint8Array.of(0x8E),\r\n    TimeSlice: Uint8Array.of(0xE8),\r\n    LaceNumber: Uint8Array.of(0xCC),\r\n    Tracks: Uint8Array.of(0x16, 0x54, 0xAE, 0x6B),\r\n    TrackEntry: Uint8Array.of(0xAE),\r\n    TrackNumber: Uint8Array.of(0xD7),\r\n    TrackUID: Uint8Array.of(0x73, 0xC5),\r\n    TrackType: Uint8Array.of(0x83),\r\n    FlagEnabled: Uint8Array.of(0xB9),\r\n    FlagDefault: Uint8Array.of(0x88),\r\n    FlagForced: Uint8Array.of(0x55, 0xAA),\r\n    FlagLacing: Uint8Array.of(0x9C),\r\n    MinCache: Uint8Array.of(0x6D, 0xE7),\r\n    MaxCache: Uint8Array.of(0x6D, 0xF8),\r\n    DefaultDuration: Uint8Array.of(0x23, 0xE3, 0x83),\r\n    DefaultDecodedFieldDuration: Uint8Array.of(0x23, 0x4E, 0x7A),\r\n    MaxBlockAdditionID: Uint8Array.of(0x55, 0xEE),\r\n    Name: Uint8Array.of(0x53, 0x6E),\r\n    Language: Uint8Array.of(0x22, 0xB5, 0x9C),\r\n    CodecID: Uint8Array.of(0x86),\r\n    CodecPrivate: Uint8Array.of(0x63, 0xA2),\r\n    CodecName: Uint8Array.of(0x25, 0x86, 0x88),\r\n    AttachmentLink: Uint8Array.of(0x74, 0x46),\r\n    CodecDecodeAll: Uint8Array.of(0xAA),\r\n    TrackOverlay: Uint8Array.of(0x6F, 0xAB),\r\n    CodecDelay: Uint8Array.of(0x56, 0xAA),\r\n    SeekPreRoll: Uint8Array.of(0x56, 0xBB),\r\n    TrackTranslate: Uint8Array.of(0x66, 0x24),\r\n    TrackTranslateEditionUID: Uint8Array.of(0x66, 0xFC),\r\n    TrackTranslateCodec: Uint8Array.of(0x66, 0xBF),\r\n    TrackTranslateTrackID: Uint8Array.of(0x66, 0xA5),\r\n    Video: Uint8Array.of(0xE0),\r\n    FlagInterlaced: Uint8Array.of(0x9A),\r\n    FieldOrder: Uint8Array.of(0x9D),\r\n    StereoMode: Uint8Array.of(0x53, 0xB8),\r\n    AlphaMode: Uint8Array.of(0x53, 0xC0),\r\n    PixelWidth: Uint8Array.of(0xB0),\r\n    PixelHeight: Uint8Array.of(0xBA),\r\n    PixelCropBottom: Uint8Array.of(0x54, 0xAA),\r\n    PixelCropTop: Uint8Array.of(0x54, 0xBB),\r\n    PixelCropLeft: Uint8Array.of(0x54, 0xCC),\r\n    PixelCropRight: Uint8Array.of(0x54, 0xDD),\r\n    DisplayWidth: Uint8Array.of(0x54, 0xB0),\r\n    DisplayHeight: Uint8Array.of(0x54, 0xBA),\r\n    DisplayUnit: Uint8Array.of(0x54, 0xB2),\r\n    AspectRatioType: Uint8Array.of(0x54, 0xB3),\r\n    ColourSpace: Uint8Array.of(0x2E, 0xB5, 0x24),\r\n    Colour: Uint8Array.of(0x55, 0xB0),\r\n    MatrixCoefficients: Uint8Array.of(0x55, 0xB1),\r\n    BitsPerChannel: Uint8Array.of(0x55, 0xB2),\r\n    ChromaSubsamplingHorz: Uint8Array.of(0x55, 0xB3),\r\n    ChromaSubsamplingVert: Uint8Array.of(0x55, 0xB4),\r\n    CbSubsamplingHorz: Uint8Array.of(0x55, 0xB5),\r\n    CbSubsamplingVert: Uint8Array.of(0x55, 0xB6),\r\n    ChromaSitingHorz: Uint8Array.of(0x55, 0xB7),\r\n    ChromaSitingVert: Uint8Array.of(0x55, 0xB8),\r\n    Range: Uint8Array.of(0x55, 0xB9),\r\n    TransferCharacteristics: Uint8Array.of(0x55, 0xBA),\r\n    Primaries: Uint8Array.of(0x55, 0xBB),\r\n    MaxCLL: Uint8Array.of(0x55, 0xBC),\r\n    MaxFALL: Uint8Array.of(0x55, 0xBD),\r\n    MasteringMetadata: Uint8Array.of(0x55, 0xD0),\r\n    PrimaryRChromaticityX: Uint8Array.of(0x55, 0xD1),\r\n    PrimaryRChromaticityY: Uint8Array.of(0x55, 0xD2),\r\n    PrimaryGChromaticityX: Uint8Array.of(0x55, 0xD3),\r\n    PrimaryGChromaticityY: Uint8Array.of(0x55, 0xD4),\r\n    PrimaryBChromaticityX: Uint8Array.of(0x55, 0xD5),\r\n    PrimaryBChromaticityY: Uint8Array.of(0x55, 0xD6),\r\n    WhitePointChromaticityX: Uint8Array.of(0x55, 0xD7),\r\n    WhitePointChromaticityY: Uint8Array.of(0x55, 0xD8),\r\n    LuminanceMax: Uint8Array.of(0x55, 0xD9),\r\n    LuminanceMin: Uint8Array.of(0x55, 0xDA),\r\n    Audio: Uint8Array.of(0xE1),\r\n    SamplingFrequency: Uint8Array.of(0xB5),\r\n    OutputSamplingFrequency: Uint8Array.of(0x78, 0xB5),\r\n    Channels: Uint8Array.of(0x9F),\r\n    BitDepth: Uint8Array.of(0x62, 0x64),\r\n    TrackOperation: Uint8Array.of(0xE2),\r\n    TrackCombinePlanes: Uint8Array.of(0xE3),\r\n    TrackPlane: Uint8Array.of(0xE4),\r\n    TrackPlaneUID: Uint8Array.of(0xE5),\r\n    TrackPlaneType: Uint8Array.of(0xE6),\r\n    TrackJoinBlocks: Uint8Array.of(0xE9),\r\n    TrackJoinUID: Uint8Array.of(0xED),\r\n    ContentEncodings: Uint8Array.of(0x6D, 0x80),\r\n    ContentEncoding: Uint8Array.of(0x62, 0x40),\r\n    ContentEncodingOrder: Uint8Array.of(0x50, 0x31),\r\n    ContentEncodingScope: Uint8Array.of(0x50, 0x32),\r\n    ContentEncodingType: Uint8Array.of(0x50, 0x33),\r\n    ContentCompression: Uint8Array.of(0x50, 0x34),\r\n    ContentCompAlgo: Uint8Array.of(0x42, 0x54),\r\n    ContentCompSettings: Uint8Array.of(0x42, 0x55),\r\n    ContentEncryption: Uint8Array.of(0x50, 0x35),\r\n    ContentEncAlgo: Uint8Array.of(0x47, 0xE1),\r\n    ContentEncKeyID: Uint8Array.of(0x47, 0xE2),\r\n    ContentSignature: Uint8Array.of(0x47, 0xE3),\r\n    ContentSigKeyID: Uint8Array.of(0x47, 0xE4),\r\n    ContentSigAlgo: Uint8Array.of(0x47, 0xE5),\r\n    ContentSigHashAlgo: Uint8Array.of(0x47, 0xE6),\r\n    Cues: Uint8Array.of(0x1C, 0x53, 0xBB, 0x6B),\r\n    CuePoint: Uint8Array.of(0xBB),\r\n    CueTime: Uint8Array.of(0xB3),\r\n    CueTrackPositions: Uint8Array.of(0xB7),\r\n    CueTrack: Uint8Array.of(0xF7),\r\n    CueClusterPosition: Uint8Array.of(0xF1),\r\n    CueRelativePosition: Uint8Array.of(0xF0),\r\n    CueDuration: Uint8Array.of(0xB2),\r\n    CueBlockNumber: Uint8Array.of(0x53, 0x78),\r\n    CueCodecState: Uint8Array.of(0xEA),\r\n    CueReference: Uint8Array.of(0xDB),\r\n    CueRefTime: Uint8Array.of(0x96),\r\n    Attachments: Uint8Array.of(0x19, 0x41, 0xA4, 0x69),\r\n    AttachedFile: Uint8Array.of(0x61, 0xA7),\r\n    FileDescription: Uint8Array.of(0x46, 0x7E),\r\n    FileName: Uint8Array.of(0x46, 0x6E),\r\n    FileMimeType: Uint8Array.of(0x46, 0x60),\r\n    FileData: Uint8Array.of(0x46, 0x5C),\r\n    FileUID: Uint8Array.of(0x46, 0xAE),\r\n    Chapters: Uint8Array.of(0x10, 0x43, 0xA7, 0x70),\r\n    EditionEntry: Uint8Array.of(0x45, 0xB9),\r\n    EditionUID: Uint8Array.of(0x45, 0xBC),\r\n    EditionFlagHidden: Uint8Array.of(0x45, 0xBD),\r\n    EditionFlagDefault: Uint8Array.of(0x45, 0xDB),\r\n    EditionFlagOrdered: Uint8Array.of(0x45, 0xDD),\r\n    ChapterAtom: Uint8Array.of(0xB6),\r\n    ChapterUID: Uint8Array.of(0x73, 0xC4),\r\n    ChapterStringUID: Uint8Array.of(0x56, 0x54),\r\n    ChapterTimeStart: Uint8Array.of(0x91),\r\n    ChapterTimeEnd: Uint8Array.of(0x92),\r\n    ChapterFlagHidden: Uint8Array.of(0x98),\r\n    ChapterFlagEnabled: Uint8Array.of(0x45, 0x98),\r\n    ChapterSegmentUID: Uint8Array.of(0x6E, 0x67),\r\n    ChapterSegmentEditionUID: Uint8Array.of(0x6E, 0xBC),\r\n    ChapterPhysicalEquiv: Uint8Array.of(0x63, 0xC3),\r\n    ChapterTrack: Uint8Array.of(0x8F),\r\n    ChapterTrackNumber: Uint8Array.of(0x89),\r\n    ChapterDisplay: Uint8Array.of(0x80),\r\n    ChapString: Uint8Array.of(0x85),\r\n    ChapLanguage: Uint8Array.of(0x43, 0x7C),\r\n    ChapCountry: Uint8Array.of(0x43, 0x7E),\r\n    ChapProcess: Uint8Array.of(0x69, 0x44),\r\n    ChapProcessCodecID: Uint8Array.of(0x69, 0x55),\r\n    ChapProcessPrivate: Uint8Array.of(0x45, 0x0D),\r\n    ChapProcessCommand: Uint8Array.of(0x69, 0x11),\r\n    ChapProcessTime: Uint8Array.of(0x69, 0x22),\r\n    ChapProcessData: Uint8Array.of(0x69, 0x33),\r\n    Tags: Uint8Array.of(0x12, 0x54, 0xC3, 0x67),\r\n    Tag: Uint8Array.of(0x73, 0x73),\r\n    Targets: Uint8Array.of(0x63, 0xC0),\r\n    TargetTypeValue: Uint8Array.of(0x68, 0xCA),\r\n    TargetType: Uint8Array.of(0x63, 0xCA),\r\n    TagTrackUID: Uint8Array.of(0x63, 0xC5),\r\n    TagEditionUID: Uint8Array.of(0x63, 0xC9),\r\n    TagChapterUID: Uint8Array.of(0x63, 0xC4),\r\n    TagAttachmentUID: Uint8Array.of(0x63, 0xC6),\r\n    SimpleTag: Uint8Array.of(0x67, 0xC8),\r\n    TagName: Uint8Array.of(0x45, 0xA3),\r\n    TagLanguage: Uint8Array.of(0x44, 0x7A),\r\n    TagDefault: Uint8Array.of(0x44, 0x84),\r\n    TagString: Uint8Array.of(0x44, 0x87),\r\n    TagBinary: Uint8Array.of(0x44, 0x85),\r\n};\r\n","export * from \"./ebml\";\r\nexport * from \"./id\";\r\nexport * from \"./typedArrayUtils\";\r\n","/***\r\n * The EMBL builder is from simple-ebml-builder\r\n * \r\n * Copyright 2017 ryiwamoto\r\n * \r\n * @author ryiwamoto, qli5\r\n * \r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * \"Software\"), to deal in the Software without restriction, including \r\n * without limitation the rights to use, copy, modify, merge, publish, \r\n * distribute, sublicense, and/or sell copies of the Software, and to \r\n * permit persons to whom the Software is furnished to do so, subject \r\n * to the following conditions:\r\n * \r\n * The above copyright notice and this permission notice shall be \r\n * included in all copies or substantial portions of the Software.\r\n * \r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS \r\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL \r\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR \r\n * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, \r\n * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER \r\n * DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\nimport * as EBML from './simple-ebml-builder/index';\r\n\r\nexport * from './simple-ebml-builder/index';\r\nexport default EBML;\r\n","/***\r\n * Copyright (C) 2018 Qli5. All Rights Reserved.\r\n * \r\n * @author qli5 <goodlq11[at](163|gmail).com>\r\n * \r\n * This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n*/\r\n\r\nimport { TextEncoder, Blob } from '../util/shim';\r\nimport EBML from '../util/ebml';\r\n\r\nclass MKV {\r\n    constructor(config) {\r\n        this.min = true;\r\n        this.onprogress = null;\r\n        Object.assign(this, config);\r\n        this.segmentUID = MKV.randomBytes(16);\r\n        this.trackUIDBase = Math.trunc(Math.random() * 2 ** 16);\r\n        this.trackMetadata = { h264: null, aac: null, ass: null };\r\n        this.duration = 0;\r\n        this.blocks = { h264: [], aac: [], ass: [] };\r\n    }\r\n\r\n    static randomBytes(num) {\r\n        return Array.from(new Array(num), () => Math.trunc(Math.random() * 256));\r\n    }\r\n\r\n    static textToMS(str) {\r\n        const [, h, mm, ss, ms10] = str.match(/(\\d+):(\\d+):(\\d+).(\\d+)/);\r\n        return h * 3600000 + mm * 60000 + ss * 1000 + ms10 * 10;\r\n    }\r\n\r\n    static mimeToCodecID(str) {\r\n        if (str.startsWith('avc1')) {\r\n            return 'V_MPEG4/ISO/AVC';\r\n        }\r\n        else if (str.startsWith('mp4a')) {\r\n            return 'A_AAC';\r\n        }\r\n        else {\r\n            throw new Error(`MKVRemuxer: unknown codec ${str}`);\r\n        }\r\n    }\r\n\r\n    static uint8ArrayConcat(...array) {\r\n        // if (Array.isArray(array[0])) array = array[0];\r\n        if (array.length == 1) return array[0];\r\n        if (typeof Buffer != 'undefined') return Buffer.concat(array);\r\n        const ret = new Uint8Array(array.reduce((i, j) => i + j.byteLength, 0));\r\n        let length = 0;\r\n        for (let e of array) {\r\n            ret.set(e, length);\r\n            length += e.byteLength;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    addH264Metadata(h264) {\r\n        this.trackMetadata.h264 = {\r\n            codecId: MKV.mimeToCodecID(h264.codec),\r\n            codecPrivate: h264.avcc,\r\n            defaultDuration: h264.refSampleDuration * 1000000,\r\n            pixelWidth: h264.codecWidth,\r\n            pixelHeight: h264.codecHeight,\r\n            displayWidth: h264.presentWidth,\r\n            displayHeight: h264.presentHeight\r\n        };\r\n        this.duration = Math.max(this.duration, h264.duration);\r\n    }\r\n\r\n    addAACMetadata(aac) {\r\n        this.trackMetadata.aac = {\r\n            codecId: MKV.mimeToCodecID(aac.originalCodec),\r\n            codecPrivate: aac.configRaw,\r\n            defaultDuration: aac.refSampleDuration * 1000000,\r\n            samplingFrequence: aac.audioSampleRate,\r\n            channels: aac.channelCount\r\n        };\r\n        this.duration = Math.max(this.duration, aac.duration);\r\n    }\r\n\r\n    addASSMetadata(ass) {\r\n        this.trackMetadata.ass = {\r\n            codecId: 'S_TEXT/ASS',\r\n            codecPrivate: new TextEncoder().encode(ass.header)\r\n        };\r\n    }\r\n\r\n    addH264Stream(h264) {\r\n        this.blocks.h264 = this.blocks.h264.concat(h264.samples.map(e => ({\r\n            track: 1,\r\n            frame: MKV.uint8ArrayConcat(...e.units.map(i => i.data)),\r\n            isKeyframe: e.isKeyframe,\r\n            discardable: Boolean(e.refIdc),\r\n            timestamp: e.pts,\r\n            simple: true,\r\n        })));\r\n    }\r\n\r\n    addAACStream(aac) {\r\n        this.blocks.aac = this.blocks.aac.concat(aac.samples.map(e => ({\r\n            track: 2,\r\n            frame: e.unit,\r\n            timestamp: e.pts,\r\n            simple: true,\r\n        })));\r\n    }\r\n\r\n    addASSStream(ass) {\r\n        this.blocks.ass = this.blocks.ass.concat(ass.lines.map((e, i) => ({\r\n            track: 3,\r\n            frame: new TextEncoder().encode(`${i},${e['Layer'] || ''},${e['Style'] || ''},${e['Name'] || ''},${e['MarginL'] || ''},${e['MarginR'] || ''},${e['MarginV'] || ''},${e['Effect'] || ''},${e['Text'] || ''}`),\r\n            timestamp: MKV.textToMS(e['Start']),\r\n            duration: MKV.textToMS(e['End']) - MKV.textToMS(e['Start']),\r\n        })));\r\n    }\r\n\r\n    build() {\r\n        return new Blob([\r\n            this.buildHeader(),\r\n            this.buildBody()\r\n        ]);\r\n    }\r\n\r\n    buildHeader() {\r\n        return new Blob([EBML.build(EBML.element(EBML.ID.EBML, [\r\n            EBML.element(EBML.ID.EBMLVersion, EBML.number(1)),\r\n            EBML.element(EBML.ID.EBMLReadVersion, EBML.number(1)),\r\n            EBML.element(EBML.ID.EBMLMaxIDLength, EBML.number(4)),\r\n            EBML.element(EBML.ID.EBMLMaxSizeLength, EBML.number(8)),\r\n            EBML.element(EBML.ID.DocType, EBML.string('matroska')),\r\n            EBML.element(EBML.ID.DocTypeVersion, EBML.number(4)),\r\n            EBML.element(EBML.ID.DocTypeReadVersion, EBML.number(2)),\r\n        ]))]);\r\n    }\r\n\r\n    buildBody() {\r\n        if (this.min) {\r\n            return new Blob([EBML.build(EBML.element(EBML.ID.Segment, [\r\n                this.getSegmentInfo(),\r\n                this.getTracks(),\r\n                ...this.getClusterArray()\r\n            ]))]);\r\n        }\r\n        else {\r\n            return new Blob([EBML.build(EBML.element(EBML.ID.Segment, [\r\n                this.getSeekHead(),\r\n                this.getVoid(4100),\r\n                this.getSegmentInfo(),\r\n                this.getTracks(),\r\n                this.getVoid(1100),\r\n                ...this.getClusterArray()\r\n            ]))]);\r\n        }\r\n    }\r\n\r\n    getSeekHead() {\r\n        return EBML.element(EBML.ID.SeekHead, [\r\n            EBML.element(EBML.ID.Seek, [\r\n                EBML.element(EBML.ID.SeekID, EBML.bytes(EBML.ID.Info)),\r\n                EBML.element(EBML.ID.SeekPosition, EBML.number(4050))\r\n            ]),\r\n            EBML.element(EBML.ID.Seek, [\r\n                EBML.element(EBML.ID.SeekID, EBML.bytes(EBML.ID.Tracks)),\r\n                EBML.element(EBML.ID.SeekPosition, EBML.number(4200))\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    getVoid(length = 2000) {\r\n        return EBML.element(EBML.ID.Void, EBML.bytes(new Uint8Array(length)));\r\n    }\r\n\r\n    getSegmentInfo() {\r\n        return EBML.element(EBML.ID.Info, [\r\n            EBML.element(EBML.ID.TimecodeScale, EBML.number(1000000)),\r\n            EBML.element(EBML.ID.MuxingApp, EBML.string('flv.js + assparser_qli5 -> simple-ebml-builder')),\r\n            EBML.element(EBML.ID.WritingApp, EBML.string('flvass2mkv.js by qli5')),\r\n            EBML.element(EBML.ID.Duration, EBML.float(this.duration)),\r\n            EBML.element(EBML.ID.SegmentUID, EBML.bytes(this.segmentUID)),\r\n        ]);\r\n    }\r\n\r\n    getTracks() {\r\n        return EBML.element(EBML.ID.Tracks, [\r\n            this.getVideoTrackEntry(),\r\n            this.getAudioTrackEntry(),\r\n            this.getSubtitleTrackEntry()\r\n        ]);\r\n    }\r\n\r\n    getVideoTrackEntry() {\r\n        return EBML.element(EBML.ID.TrackEntry, [\r\n            EBML.element(EBML.ID.TrackNumber, EBML.number(1)),\r\n            EBML.element(EBML.ID.TrackUID, EBML.number(this.trackUIDBase + 1)),\r\n            EBML.element(EBML.ID.TrackType, EBML.number(0x01)),\r\n            EBML.element(EBML.ID.FlagLacing, EBML.number(0x00)),\r\n            EBML.element(EBML.ID.CodecID, EBML.string(this.trackMetadata.h264.codecId)),\r\n            EBML.element(EBML.ID.CodecPrivate, EBML.bytes(this.trackMetadata.h264.codecPrivate)),\r\n            EBML.element(EBML.ID.DefaultDuration, EBML.number(this.trackMetadata.h264.defaultDuration)),\r\n            EBML.element(EBML.ID.Language, EBML.string('und')),\r\n            EBML.element(EBML.ID.Video, [\r\n                EBML.element(EBML.ID.PixelWidth, EBML.number(this.trackMetadata.h264.pixelWidth)),\r\n                EBML.element(EBML.ID.PixelHeight, EBML.number(this.trackMetadata.h264.pixelHeight)),\r\n                EBML.element(EBML.ID.DisplayWidth, EBML.number(this.trackMetadata.h264.displayWidth)),\r\n                EBML.element(EBML.ID.DisplayHeight, EBML.number(this.trackMetadata.h264.displayHeight)),\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    getAudioTrackEntry() {\r\n        return EBML.element(EBML.ID.TrackEntry, [\r\n            EBML.element(EBML.ID.TrackNumber, EBML.number(2)),\r\n            EBML.element(EBML.ID.TrackUID, EBML.number(this.trackUIDBase + 2)),\r\n            EBML.element(EBML.ID.TrackType, EBML.number(0x02)),\r\n            EBML.element(EBML.ID.FlagLacing, EBML.number(0x00)),\r\n            EBML.element(EBML.ID.CodecID, EBML.string(this.trackMetadata.aac.codecId)),\r\n            EBML.element(EBML.ID.CodecPrivate, EBML.bytes(this.trackMetadata.aac.codecPrivate)),\r\n            EBML.element(EBML.ID.DefaultDuration, EBML.number(this.trackMetadata.aac.defaultDuration)),\r\n            EBML.element(EBML.ID.Language, EBML.string('und')),\r\n            EBML.element(EBML.ID.Audio, [\r\n                EBML.element(EBML.ID.SamplingFrequency, EBML.float(this.trackMetadata.aac.samplingFrequence)),\r\n                EBML.element(EBML.ID.Channels, EBML.number(this.trackMetadata.aac.channels)),\r\n            ]),\r\n        ]);\r\n    }\r\n\r\n    getSubtitleTrackEntry() {\r\n        return EBML.element(EBML.ID.TrackEntry, [\r\n            EBML.element(EBML.ID.TrackNumber, EBML.number(3)),\r\n            EBML.element(EBML.ID.TrackUID, EBML.number(this.trackUIDBase + 3)),\r\n            EBML.element(EBML.ID.TrackType, EBML.number(0x11)),\r\n            EBML.element(EBML.ID.FlagLacing, EBML.number(0x00)),\r\n            EBML.element(EBML.ID.CodecID, EBML.string(this.trackMetadata.ass.codecId)),\r\n            EBML.element(EBML.ID.CodecPrivate, EBML.bytes(this.trackMetadata.ass.codecPrivate)),\r\n            EBML.element(EBML.ID.Language, EBML.string('und')),\r\n        ]);\r\n    }\r\n\r\n    getClusterArray() {\r\n        // H264 codecState\r\n        this.blocks.h264[0].simple = false;\r\n        this.blocks.h264[0].codecState = this.trackMetadata.h264.codecPrivate;\r\n\r\n        let i = 0;\r\n        let j = 0;\r\n        let k = 0;\r\n        let clusterTimeCode = 0;\r\n        let clusterContent = [EBML.element(EBML.ID.Timecode, EBML.number(clusterTimeCode))];\r\n        let ret = [clusterContent];\r\n        const progressThrottler = Math.pow(2, Math.floor(Math.log(this.blocks.h264.length >> 7) / Math.log(2))) - 1;\r\n        for (i = 0; i < this.blocks.h264.length; i++) {\r\n            const e = this.blocks.h264[i];\r\n            for (; j < this.blocks.aac.length; j++) {\r\n                if (this.blocks.aac[j].timestamp < e.timestamp) {\r\n                    clusterContent.push(this.getBlocks(this.blocks.aac[j], clusterTimeCode));\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            for (; k < this.blocks.ass.length; k++) {\r\n                if (this.blocks.ass[k].timestamp < e.timestamp) {\r\n                    clusterContent.push(this.getBlocks(this.blocks.ass[k], clusterTimeCode));\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            if (e.isKeyframe/*  || clusterContent.length > 72 */) {\r\n                // start new cluster\r\n                clusterTimeCode = e.timestamp;\r\n                clusterContent = [EBML.element(EBML.ID.Timecode, EBML.number(clusterTimeCode))];\r\n                ret.push(clusterContent);\r\n            }\r\n            clusterContent.push(this.getBlocks(e, clusterTimeCode));\r\n            if (this.onprogress && !(i & progressThrottler)) this.onprogress({ loaded: i, total: this.blocks.h264.length });\r\n        }\r\n        for (; j < this.blocks.aac.length; j++) clusterContent.push(this.getBlocks(this.blocks.aac[j], clusterTimeCode));\r\n        for (; k < this.blocks.ass.length; k++) clusterContent.push(this.getBlocks(this.blocks.ass[k], clusterTimeCode));\r\n        if (this.onprogress) this.onprogress({ loaded: i, total: this.blocks.h264.length });\r\n        if (ret[0].length == 1) ret.shift();\r\n        ret = ret.map(clusterContent => EBML.element(EBML.ID.Cluster, clusterContent));\r\n\r\n        return ret;\r\n    }\r\n\r\n    getBlocks(e, clusterTimeCode) {\r\n        if (e.simple) {\r\n            return EBML.element(EBML.ID.SimpleBlock, [\r\n                EBML.vintEncodedNumber(e.track),\r\n                EBML.int16(e.timestamp - clusterTimeCode),\r\n                EBML.bytes(e.isKeyframe ? [128] : [0]),\r\n                EBML.bytes(e.frame)\r\n            ]);\r\n        }\r\n        else {\r\n            let blockGroupContent = [EBML.element(EBML.ID.Block, [\r\n                EBML.vintEncodedNumber(e.track),\r\n                EBML.int16(e.timestamp - clusterTimeCode),\r\n                EBML.bytes([0]),\r\n                EBML.bytes(e.frame)\r\n            ])];\r\n            if (typeof e.duration != 'undefined') {\r\n                blockGroupContent.push(EBML.element(EBML.ID.BlockDuration, EBML.number(e.duration)));\r\n            }\r\n            if (typeof e.codecState != 'undefined') {\r\n                blockGroupContent.push(EBML.element(EBML.ID.CodecState, EBML.bytes(e.codecState)));\r\n            }\r\n            return EBML.element(EBML.ID.BlockGroup, blockGroupContent);\r\n        }\r\n    }\r\n}\r\n\r\nexport { MKV };\r\nexport default MKV;\r\n","/***\r\n * FLV + ASS => MKV transmuxer\r\n * Demux FLV into H264 + AAC stream and ASS into line stream; then\r\n * remux them into a MKV file.\r\n * \r\n * @author qli5 <goodlq11[at](163|gmail).com>\r\n * \r\n * This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n * \r\n * The FLV demuxer is from flv.js <https://github.com/Bilibili/flv.js/>\r\n * by zheng qian <xqq@xqq.im>, licensed under Apache 2.0.\r\n * \r\n * The EMBL builder is from simple-ebml-builder\r\n * <https://www.npmjs.com/package/simple-ebml-builder> by ryiwamoto, \r\n * licensed under MIT.\r\n */\r\n\r\nimport FLVDemuxer from './demuxer/flvdemuxer';\r\nimport ASS from './demuxer/ass';\r\nimport MKV from './remuxer/mkv';\r\nimport { Blob } from './util/shim';\r\n\r\nconst FLVASS2MKV = class {\r\n    constructor(config = {}) {\r\n        this.onflvprogress = null;\r\n        this.onassprogress = null;\r\n        this.onurlrevokesafe = null;\r\n        this.onfileload = null;\r\n        this.onmkvprogress = null;\r\n        this.onload = null;\r\n        Object.assign(this, config);\r\n        this.mkvConfig = { onprogress: this.onmkvprogress };\r\n        Object.assign(this.mkvConfig, config.mkvConfig);\r\n    }\r\n\r\n    /**\r\n     * Demux FLV into H264 + AAC stream and ASS into line stream; then\r\n     * remux them into a MKV file.\r\n     * @param {Blob|string|ArrayBuffer} flv \r\n     * @param {Blob|string|ArrayBuffer} ass \r\n     */\r\n    async build(flv = './samples/gen_case.flv', ass = './samples/gen_case.ass') {\r\n        // load flv and ass as arraybuffer\r\n        await Promise.all([\r\n            new Promise((r, j) => {\r\n                if (flv instanceof Blob) {\r\n                    const e = new FileReader();\r\n                    e.onprogress = this.onflvprogress;\r\n                    e.onload = () => r(flv = e.result);\r\n                    e.onerror = j;\r\n                    e.readAsArrayBuffer(flv);\r\n                }\r\n                else if (typeof flv == 'string') {\r\n                    const e = new XMLHttpRequest();\r\n                    e.responseType = 'arraybuffer';\r\n                    e.onprogress = this.onflvprogress;\r\n                    e.onload = () => r(flv = e.response);\r\n                    e.onerror = j;\r\n                    e.open('get', flv);\r\n                    e.send();\r\n                    flv = 2; // onurlrevokesafe\r\n                }\r\n                else if (flv instanceof ArrayBuffer) {\r\n                    r(flv);\r\n                }\r\n                else {\r\n                    j(new TypeError('flvass2mkv: flv {Blob|string|ArrayBuffer}'));\r\n                }\r\n                if (typeof ass != 'string' && this.onurlrevokesafe) this.onurlrevokesafe();\r\n            }),\r\n            new Promise((r, j) => {\r\n                if (ass instanceof Blob) {\r\n                    const e = new FileReader();\r\n                    e.onprogress = this.onflvprogress;\r\n                    e.onload = () => r(ass = e.result);\r\n                    e.onerror = j;\r\n                    e.readAsArrayBuffer(ass);\r\n                }\r\n                else if (typeof ass == 'string') {\r\n                    const e = new XMLHttpRequest();\r\n                    e.responseType = 'arraybuffer';\r\n                    e.onprogress = this.onflvprogress;\r\n                    e.onload = () => r(ass = e.response);\r\n                    e.onerror = j;\r\n                    e.open('get', ass);\r\n                    e.send();\r\n                    ass = 2; // onurlrevokesafe\r\n                }\r\n                else if (ass instanceof ArrayBuffer) {\r\n                    r(ass);\r\n                }\r\n                else {\r\n                    j(new TypeError('flvass2mkv: ass {Blob|string|ArrayBuffer}'));\r\n                }\r\n                if (typeof flv != 'string' && this.onurlrevokesafe) this.onurlrevokesafe();\r\n            }),\r\n        ]);\r\n        if (this.onfileload) this.onfileload();\r\n\r\n        const mkv = new MKV(this.mkvConfig);\r\n\r\n        const assParser = new ASS();\r\n        ass = assParser.parseFile(ass);\r\n        mkv.addASSMetadata(ass);\r\n        mkv.addASSStream(ass);\r\n\r\n        const flvProbeData = FLVDemuxer.probe(flv);\r\n        const flvDemuxer = new FLVDemuxer(flvProbeData);\r\n        let mediaInfo = null;\r\n        let h264 = null;\r\n        let aac = null;\r\n        flvDemuxer.onDataAvailable = (...array) => {\r\n            array.forEach(e => {\r\n                if (e.type == 'video') h264 = e;\r\n                else if (e.type == 'audio') aac = e;\r\n                else throw new Error(`MKVRemuxer: unrecoginzed data type ${e.type}`);\r\n            });\r\n        };\r\n        flvDemuxer.onMediaInfo = i => mediaInfo = i;\r\n        flvDemuxer.onTrackMetadata = (i, e) => {\r\n            if (i == 'video') mkv.addH264Metadata(e);\r\n            else if (i == 'audio') mkv.addAACMetadata(e);\r\n            else throw new Error(`MKVRemuxer: unrecoginzed metadata type ${i}`);\r\n        };\r\n        flvDemuxer.onError = e => { throw new Error(e); };\r\n        const finalOffset = flvDemuxer.parseChunks(flv, flvProbeData.dataOffset);\r\n        if (finalOffset != flv.byteLength) throw new Error('FLVDemuxer: unexpected EOF');\r\n        mkv.addH264Stream(h264);\r\n        mkv.addAACStream(aac);\r\n\r\n        const ret = mkv.build();\r\n        if (this.onload) this.onload(ret);\r\n        return ret;\r\n    }\r\n};\r\n\r\n// export { FLVASS2MKV };\r\nexport default FLVASS2MKV;\r\n\r\n// if nodejs then test\r\nif (typeof window == 'undefined') {\r\n    if (require.main == module) {\r\n        (async () => {\r\n            const fs = require('fs');\r\n            const assFileName = process.argv.slice(1).find(e => e.includes('.ass')) || './samples/gen_case.ass';\r\n            const flvFileName = process.argv.slice(1).find(e => e.includes('.flv')) || './samples/gen_case.flv';\r\n            const assFile = fs.readFileSync(assFileName).buffer;\r\n            const flvFile = fs.readFileSync(flvFileName).buffer;\r\n            fs.writeFileSync('out.mkv', await new FLVASS2MKV({ onmkvprogress: console.log.bind(console) }).build(flvFile, assFile));\r\n        })();\r\n    }\r\n}\r\n"],"names":["navigator","TextDecoder","objectProto","nativeObjectToString","symToStringTag","funcProto","funcToString","hasOwnProperty","HASH_UNDEFINED","TextEncoder","Blob"],"mappings":"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"}